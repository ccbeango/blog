---
title: é¡¹ç›®æ­å»ºè§„èŒƒçš„é…ç½®
date: 2022-07-15 21:33:09
permalink: /pages/1e1cbc/
categories:
  - å‰ç«¯
  - JavaScript
tags:
  - 
---
# é¡¹ç›®æ­å»ºè§„èŒƒ

åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œå†™ä½œå¼€å‘çš„ä»£ç é£æ ¼å’Œè§„èŒƒè‡³å…³é‡è¦ï¼Œå¦‚ä½•ä¿è¯ä¸€ä¸ªié¡¹ç›®çš„é£æ ¼å‘¢ï¼Ÿ

* é€šè¿‡è§„èŒƒæ–‡æ¡£å®šä¹‰ï¼Œå¼€å‘äººå‘˜åœ¨å¼€å‘å‰ç†Ÿæ‚‰è§„èŒƒæ˜¾ç„¶ä¸æ˜¯å¾ˆåˆç†ï¼Œæ— è®ºå¯¹é¡¹ç›®ä»£ç é£æ ¼å¤šä¹ˆçš„ç†Ÿæ‚‰ï¼Œäººæ€»ä¼šå‡ºé”™ï¼Œæ¯”å¦‚å¿˜è®°åŠ åˆ†å·ã€å•å¼•å·å’ŒåŒå¼•å·æ··ç”¨ã€å•è¡Œä»£ç è¿‡é•¿ã€ç¼©è¿›é”™è¯¯ç­‰ç­‰ã€‚

* é€šè¿‡ä¸€äº›åˆ—è¾…åŠ©å·¥å…·ï¼Œå°†é¡¹ç›®çš„é£æ ¼è§„èŒƒäº¤ç»™æœºå™¨å¤„ç†ï¼Œæ‰æ˜¯æ­£è§£ã€‚å„å¤§å¼€æºé¡¹ç›®ä¸­éƒ½æœ‰æ¥è§„èŒƒä»£ç é£æ ¼çš„å·¥å…·ã€‚

æœ¬æ–‡é€šè¿‡åœ¨VSCodeä¸­æ­å»ºä¸€ä¸ªVueé¡¹ç›®ï¼Œé…ç½®ç›¸å…³å·¥å…·ä»¥åŠä»£ç åº“ä¾èµ–æ¥æ¼”ç¤ºé¡¹ç›®æ­å»ºè§„èŒƒã€‚

å‡†å¤‡å·¥ä½œï¼Œåˆå§‹åŒ–ä¸€ä¸ªVue3çš„é¡¹ç›®ï¼š

```shell
npm init vue@latest
```

æ³¨æ„ï¼š 

* åˆ›å»ºé¡¹ç›®æ—¶ï¼Œé—®é¢˜ Add ESLint for code quality? ... No / Yes  é€‰æ‹©äº†Yesï¼Œè®©è„šæ‰‹æ¶è‡ªåŠ¨å¸®å®‰è£…Vueä¸­ESLintçš„ç›¸å…³ä¾èµ–ã€‚
* Add Prettier for code formatting? ...  No / Yes  éšæ„é€‰æ‹©ï¼Œä¹‹åä¼šå†æ‰‹åŠ¨å®‰è£…åšæ¼”ç¤ºã€‚

## é›†æˆeditorconfig

[EditorConfig](https://editorconfig.org/) æœ‰åŠ©äºä¸ºä¸åŒ IDE ç¼–è¾‘å™¨ä¸Šå¤„ç†åŒä¸€é¡¹ç›®çš„å¤šä¸ªå¼€å‘äººå‘˜ç»´æŠ¤ä¸€è‡´çš„ç¼–ç é£æ ¼ã€‚æœ‰å¾ˆå¤š[é¡¹ç›®](https://github.com/editorconfig/editorconfig/wiki/Projects-Using-EditorConfig)éƒ½åœ¨ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œæ¯”å¦‚åœ¨[React](https://github.com/facebook/react/blob/main/.editorconfig)ä»¥åŠ[Vue2](https://github.com/vuejs/vue/blob/main/.editorconfig)çš„é¡¹ç›®ä¸­ï¼Œéƒ½å¯ä»¥è§åˆ°å®ƒçš„é…ç½®æ–‡ä»¶ã€‚

åœ¨VSCodeä¸­éœ€è¦å®‰è£…æ’ä»¶[EditorConfig for VS Code](https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig) ã€‚VSCodeåœ¨å®‰è£…æ’ä»¶ä¼šé»˜è®¤è¯»å–é¡¹ç›®ä¸­æ ¹ç›®å½•ä¸‹çš„`.editorconfig`ä»¥è§„èŒƒæˆ‘ä»¬çš„ä»£ç ã€‚

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºé…ç½®æ–‡ä»¶`.editorconfig`ï¼š

```shell
# http://editorconfig.org

root = true

[*] # è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶é€‚ç”¨
charset = utf-8 # è®¾ç½®æ–‡ä»¶å­—ç¬¦é›†ä¸º utf-8
indent_style = space # ç¼©è¿›é£æ ¼ï¼ˆtab | spaceï¼‰
indent_size = 2 # ç¼©è¿›å¤§å°
end_of_line = lf # æ§åˆ¶æ¢è¡Œç±»å‹(lf | cr | crlf)
trim_trailing_whitespace = true # å»é™¤è¡Œé¦–çš„ä»»æ„ç©ºç™½å­—ç¬¦
insert_final_newline = true # å§‹ç»ˆåœ¨æ–‡ä»¶æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°è¡Œ
max_line_length = 80 # å•è¡Œæœ€å¤§å­—ç¬¦

[*.md] # è¡¨ç¤ºä»… md æ–‡ä»¶é€‚ç”¨ä»¥ä¸‹è§„åˆ™
max_line_length = off # off è¡¨ç¤ºå…³é—­
trim_trailing_whitespace = false
```

ä¸Šé¢çš„ä¸­æ‹¬å·ä¸­æ˜¯é€šé…ç¬¦ï¼Œè¡¨ç¤ºè¦åŒ¹é…å“ªç§æ–‡ä»¶åº”ç”¨ä»£ç è§„èŒƒï¼Œè¯¦è§å®˜ç½‘[File Format Details](https://editorconfig.org/)ç« èŠ‚ã€‚

æ¥ç€ä¸‹é¢å®šä¹‰åŒ¹é…åˆ°çš„æ–‡ä»¶çš„è§„èŒƒå±æ€§ï¼Œæ‰€æœ‰çš„é…ç½®å±æ€§å¯è§[å±æ€§åˆ—è¡¨](https://github.com/editorconfig/editorconfig/wiki/EditorConfig-Properties#current-universal-properties)ã€‚

## é…ç½®prettier

[Prettier](https://github.com/prettier/prettier) æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œæ”¯æŒ JavaScriptã€TypeScriptã€CSSã€SCSSã€Lessã€JSXã€Angularã€Vueã€GraphQLã€JSONã€Markdown ç­‰è¯­è¨€ï¼ŒåŸºæœ¬ä¸Šå‰ç«¯èƒ½ç”¨åˆ°çš„æ–‡ä»¶æ ¼å¼å®ƒéƒ½å¯ä»¥æå®šï¼Œæ˜¯å½“ä¸‹æœ€æµè¡Œçš„ä»£ç æ ¼å¼åŒ–å·¥å…·ã€‚

åœ¨VSCodeä¸­å¯å®‰è£…æ’ä»¶[Prettier - Code formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)ï¼Œç„¶ååœ¨ç”¨æˆ·çš„`settings.json`ä¸­æ·»åŠ ä¸€è¡Œé…ç½®ï¼Œå°†Prettierè®¾ç½®ä¸ºå…¨å±€é»˜è®¤æ ¼å¼åŒ–å·¥å…·ã€‚

```json
{
  "editor.defaultFormatter": "esbenp.prettier-vscode",
}
```

VSCodeä¼šæŒ‰ç…§ä»¥ä¸‹ä¼˜å…ˆçº§æ¥è¯»å–é…ç½®ï¼š

1. è¯»å–é¡¹ç›®ä¸­æ ¹ç›®å½•ä¸‹çš„[Prettieré…ç½®æ–‡ä»¶](https://prettier.io/docs/en/configuration.html)ï¼Œå¦‚`.prettierrc`ï¼Œ`.prettierrc.js`
2. è¯»å–`.editorconfig`
3. VSCodeä¸­çš„Prettieré…ç½®ã€‚åªè¦æ‰¾åˆ°å°±å¿½ç•¥VSCodeé›†æˆæ’ä»¶çš„é…ç½®ã€‚

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º`.prettierrc`ï¼š

```shell
{
  "useTabs": false,
  "tabWidth": 2,
  "printWidth": 80,
  "singleQuote": true,
  "trailingComma": "none",
  "semi": false,
  "arrowParens": "avoid"
}
```

é…ç½®è¯¦è§å®˜æ–¹æ–‡æ¡£[Options](https://prettier.io/docs/en/options.html)ï¼Œä¸Šé¢çš„é…ç½®å«ä¹‰å¦‚ä¸‹ï¼š

* useTabsï¼šä½¿ç”¨tabç¼©è¿›è¿˜æ˜¯ç©ºæ ¼ç¼©è¿›ï¼Œé€‰æ‹©falseï¼›
* tabWidthï¼štabæ˜¯ç©ºæ ¼çš„æƒ…å†µä¸‹ï¼Œæ˜¯å‡ ä¸ªç©ºæ ¼ï¼Œé€‰æ‹©2ä¸ªï¼›
* printWidthï¼šå½“è¡Œå­—ç¬¦çš„é•¿åº¦ï¼Œæ¨è80ï¼Œä¹Ÿæœ‰äººå–œæ¬¢100æˆ–è€…120ï¼›
* singleQuoteï¼šä½¿ç”¨å•å¼•å·è¿˜æ˜¯åŒå¼•å·ï¼Œé€‰æ‹©trueï¼Œä½¿ç”¨å•å¼•å·ï¼›
* trailingCommaï¼šåœ¨å¤šè¡Œè¾“å…¥çš„å°¾é€—å·æ˜¯å¦æ·»åŠ ï¼Œè®¾ç½®ä¸º `none`ï¼›
* semiï¼šè¯­å¥æœ«å°¾æ˜¯å¦è¦åŠ åˆ†å·ï¼Œé»˜è®¤å€¼trueï¼Œé€‰æ‹©falseè¡¨ç¤ºä¸åŠ ï¼›

* arrowParensï¼šæ˜¯å¦ä¿ç•™ç®­å¤´å‡½æ•°çš„æ‹¬å·ï¼Œ`always`æ€»ä¿ç•™ï¼Œ`avoid`å°½å¯èƒ½ç§»é™¤

æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºPrettierçš„å¿½ç•¥æ–‡ä»¶ï¼Œæ¥å¿½ç•¥Preitterå¯¹éƒ¨åˆ†æ–‡ä»¶åšæ ¼å¼åŒ–å¤„ç†ã€‚

åˆ›å»º`.prettierignore`å¿½ç•¥æ–‡ä»¶

```shell
/dist/*
.local
.output.js
/node_modules/**

**/*.svg
**/*.sh

/public/*
```

æ­¤å¿½ç•¥æ–‡ä»¶æ˜¯åœ¨`.gitignore`ä¸Šçš„è¡¥å……ï¼Œå¦‚æœæ²¡æœ‰è¦è¡¥å……çš„ï¼Œå¯ä»¥ä¸è¦è¿™ä¸ªæ–‡ä»¶ï¼ŒPrettierä¼šä½¿ç”¨`.gitignore`ã€‚



åœ¨é¡¹ç›®ä¸­å®‰è£…prettierä¾èµ–ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œè„šæœ¬æ¥æ ¼å¼åŒ–ä»£ç ï¼š

```shell
npm install prettier -D
```

é…ç½®è„šæœ¬ï¼ˆåªæ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œå¼€å‘ä¸­æ— éœ€é…ç½®ï¼‰

```json
"scripts": {
  "prettier": "prettier --write ."
},
```

æœ‰å¦‚ä¸‹ä»£ç ï¼š

```vue
<script setup lang="ts">
import WelcomeItem from './WelcomeItem.vue';
import DocumentationIcon from './icons/IconDocumentation.vue';
import ToolingIcon from './icons/IconTooling.vue';



      import EcosystemIcon from './icons/IconEcosystem.vue';
import CommunityIcon from './icons/IconCommunity.vue';
import SupportIcon from "./icons/IconSupport.vue"
</script>
```

æ‰§è¡Œ`npm run prettier`åï¼Œä»£ç ä¼šæŒ‰ç…§å®šä¹‰è§„èŒƒè‡ªåŠ¨æ ¼å¼åŒ–ï¼š

```js
<script setup lang="ts">
import WelcomeItem from './WelcomeItem.vue'
import DocumentationIcon from './icons/IconDocumentation.vue'
import ToolingIcon from './icons/IconTooling.vue'

import EcosystemIcon from './icons/IconEcosystem.vue'
import CommunityIcon from './icons/IconCommunity.vue'
import SupportIcon from './icons/IconSupport.vue'
</script>
```

ä¸è¿‡æˆ‘ä»¬é€šå¸¸ä¸ä¼šæ‰‹åŠ¨å»æ‰§è¡Œæ ¼å¼åŒ–ä»£ç ï¼Œè€Œæ˜¯é€šè¿‡ESLintè¿›è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–ã€‚

## é…ç½®ESLint

åœ¨åˆ›å»ºé¡¹ç›®æ—¶ï¼Œè„šæ‰‹æ¶å·²è‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ESLintçš„é…ç½®`.eslintrc.cjs`ï¼š

```js
/* eslint-env node */
require("@rushstack/eslint-patch/modern-module-resolution");

module.exports = {
  "root": true,
  "extends": [
    "plugin:vue/vue3-essential",
    "eslint:recommended",
    "@vue/eslint-config-typescript/recommended",
    "@vue/eslint-config-prettier"
  ]
}
```

å¦‚æœåœ¨åˆ›å»ºé¡¹ç›®æ—¶ï¼Œæ²¡æœ‰è‡ªåŠ¨å®‰è£…Prettierï¼Œå¯æ‰‹åŠ¨å®‰è£…ç›¸å…³ä¾èµ–ï¼š

```shell
npm i -D prettier @vue/eslint-config-prettier
```

ç„¶ååœ¨`extends`ä¸­æ·»åŠ `"@vue/eslint-config-prettier"`ä¾èµ–å³å¯ã€‚

åœ¨VSCodeä¸­å®‰è£…æ’ä»¶[ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)ï¼Œé»˜è®¤ä¼šè¯»å–æˆ‘ä»¬é¡¹ç›®ä¸­çš„`.eslintrc.cjs`é…ç½®æ¥æ£€æŸ¥æˆ‘ä»¬çš„ä»£ç è§„èŒƒã€‚

## é…ç½®Husky

è™½ç„¶æˆ‘ä»¬å·²ç»è¦æ±‚é¡¹ç›®ä½¿ç”¨eslintäº†ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯ç»„å‘˜æäº¤ä»£ç ä¹‹å‰éƒ½å°†eslintä¸­çš„é—®é¢˜è§£å†³æ‰äº†ï¼š

* ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸Œæœ›ä¿è¯ä»£ç ä»“åº“ä¸­çš„ä»£ç éƒ½æ˜¯ç¬¦åˆeslintè§„èŒƒçš„ï¼›

* é‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨ç»„å‘˜æ‰§è¡Œ `git commit ` å‘½ä»¤çš„æ—¶å€™å¯¹å…¶è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœä¸ç¬¦åˆeslintè§„èŒƒï¼Œé‚£ä¹ˆè‡ªåŠ¨é€šè¿‡è§„èŒƒè¿›è¡Œä¿®å¤ï¼›

[Husky](https://typicode.github.io/husky/#/)æ˜¯ä¸€ä¸ªgit hookå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§¦å‘gitæäº¤çš„å„ä¸ªé˜¶æ®µï¼špre-commitã€commit-msgã€pre-pushã€‚

é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Huskyåœ¨åšæ ¡éªŒã€‚

è‡ªåŠ¨å®‰è£…ï¼š

```shell
npx husky-init && npm install       # npm
npx husky-init && yarn              # Yarn 1
yarn dlx husky-init --yarn2 && yarn # Yarn 2+
pnpm dlx husky-init && pnpm install # pnpm
```

ä¸Šé¢çš„å‘½ä»¤ä¼šåˆå§‹åŒ–Huskyé…ç½®ï¼š

* ä¿®æ”¹`package.json`æ–‡ä»¶ï¼Œæ·»åŠ Scriptsè„šæœ¬`"prepare": "husky install"`
* å¹¶åˆ›å»º`.husky`ç›®å½•ï¼Œæ–°å»ºä¸€ä¸ª`pre-commit`ç¤ºä¾‹ï¼Œè¿™ä¸ªç¤ºä¾‹é»˜è®¤è¿è¡Œ`npm run test`

åœ¨`pre-commit`æ·»åŠ `npm run lint`

```shell {4}
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npm run lint
```

å½“ä½¿ç”¨`git commit`æäº¤ä»£ç å‰ï¼ŒHuskyä¼šè‡ªåŠ¨è§¦å‘Git pre-commitçš„Hookï¼Œæ‰§è¡Œeslintæ¥æ ¡éªŒä»£ç æ˜¯å¦ç¬¦åˆESLintè§„èŒƒï¼Œå¹¶ä¿®å¤ä¸è§„èŒƒçš„ä»£ç ï¼Œä¸‹é¢æ˜¯æ‰§è¡Œç¤ºä¾‹ï¼š

```shell
 git commit -m "commit test"

> test2@0.0.0 lint
> eslint . --ext .vue,.js,.jsx,.cjs,.mjs,.ts,.tsx,.cts,.mts --fix --ignore-path .gitignore
 create mode 100644 src/components/icons/IconSupport.vue
 create mode 100644 src/components/icons/IconTooling.vue
 create mode 100644 src/main.ts
 create mode 100644 src/router/index.ts
 create mode 100644 src/stores/counter.ts
 create mode 100644 src/views/AboutView.vue
 create mode 100644 src/views/HomeView.vue
 create mode 100644 tsconfig.app.json
 create mode 100644 tsconfig.config.json
 create mode 100644 tsconfig.json
 create mode 100644 tsconfig.vitest.json
 create mode 100644 vite.config.ts
```

ä½¿ç”¨`husky add .`ï¼Œå¯ä»¥åˆ›å»ºHookï¼š

```shell
npx husky add .husky/commit-msg "npx --no-install commitlint --edit $1"
```

* `.husky/commit-msg` æŒ‡å®šè¦åˆ›å»ºå“ªä¸€ä¸ªé˜¶æ®µçš„GitHook
* å¼•å·ä¸­çš„å†…å®¹`"npx --no-install commitlint --edit $1"`è¡¨ç¤ºè¦åˆ›å»ºçš„è„šæœ¬å†…å®¹

ä¸Šé¢çš„å‘½ä»¤åˆ›å»ºå‡ºçš„è„šæœ¬å¦‚ä¸‹ï¼š

```shell
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx --no-install commitlint --edit 
```

## é…ç½®Commitè§„èŒƒ

é€šå¸¸æˆ‘ä»¬çš„git commitä¼šæŒ‰ç…§ç»Ÿä¸€çš„é£æ ¼æ¥æäº¤ï¼Œè¿™æ ·å¯ä»¥å¿«é€Ÿå®šä½æ¯æ¬¡æäº¤çš„å†…å®¹ï¼Œæ–¹ä¾¿ä¹‹åå¯¹ç‰ˆæœ¬è¿›è¡Œæ§åˆ¶ã€‚

è§„èŒƒçš„Commit message éƒ½åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šHeaderï¼ŒBody å’Œ Footerã€‚

```shell
<type>(<scope>): <subject>
// ç©ºä¸€è¡Œ
<body>
// ç©ºä¸€è¡Œ
<footer>
```

Header éƒ¨åˆ†æ˜¯å¿…éœ€çš„ï¼Œä¸”åªæœ‰ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼š`type`ï¼ˆå¿…éœ€ï¼‰ã€`scope`ï¼ˆå¯é€‰ï¼‰å’Œ`subject`ï¼ˆå¿…éœ€ï¼‰ã€‚

Body å’Œ Footer å¯ä»¥çœç•¥ã€‚Body éƒ¨åˆ†æ˜¯å¯¹æœ¬æ¬¡ commit çš„è¯¦ç»†æè¿°ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œã€‚

Footer éƒ¨åˆ†æ˜¯å¯¹ä¸å…¼å®¹å˜åŠ¨å’Œå…³è”çš„issueè¿›è¡Œæè¿°ã€‚

ä¸ç®¡æ˜¯å“ªä¸€ä¸ªéƒ¨åˆ†ï¼Œä»»ä½•ä¸€è¡Œéƒ½ä¸å¾—è¶…è¿‡72ä¸ªå­—ç¬¦ï¼ˆæˆ–100ä¸ªå­—ç¬¦ï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é¿å…è‡ªåŠ¨æ¢è¡Œå½±å“ç¾è§‚ã€‚

å…³äºCommitçš„æäº¤è§„èŒƒçš„è¯¦ç»†ä»‹ç»ï¼Œå¯å‚è€ƒ[Commit message å’Œ Change log ç¼–å†™æŒ‡å—](https://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)ã€‚

ä¹Ÿå¯ä»¥çœ‹ä¸‹Vueçš„[Commit Messgae](https://github.com/vuejs/core/commits/main)ï¼Œä»¥åŠVueå¯¹Commit Messageçš„æ ¡éªŒè„šæœ¬ï¼š[verifyCommit.js](https://github.com/vuejs/core/blob/main/scripts/verifyCommit.js)

æ˜¾ç„¶ï¼Œå¦‚æœæ¯æ¬¡æ‰‹åŠ¨æ¥ç¼–å†™è¿™äº›æ˜¯æ¯”è¾ƒéº»çƒ¦çš„äº‹æƒ…ï¼ŒVueå®˜æ–¹åº“è‡ªå·±å†™äº†æ ¡éªŒçš„è„šæœ¬ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå·¥å…·ï¼š[Commitizen](https://github.com/commitizen/cz-cli)ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬ç¼–å†™è§„èŒƒ commit message çš„å·¥å…·ã€‚

å®‰è£…Commitizenï¼š

```shell
npm i commitizen -D
```

é…ç½®äº¤äº’å¼æäº¤ç›¸å…³é€‚é…å™¨ï¼Œå³å¯å¼€å§‹ä½¿ç”¨ï¼Œä¸‹é¢ä»‹ç»å‡ ç§é…ç½®ï¼Œä¸»è¦æ˜¯åœ¨äºä¿®æ”¹æç¤ºæ–‡æ¡ˆã€‚

### é»˜è®¤æç¤ºæ–‡æ¡ˆ

å¦‚æœä¸éœ€è¦å®šåˆ¶Commitæäº¤æ—¶çš„äº¤äº’æç¤ºæ–‡æ¡ˆï¼Œå¯ä»¥ç›´æ¥å®‰è£…commitizen çš„Angularé¢„è®¾é€‚é…å™¨ï¼š

```shell
npm i -D cz-conventional-changelog
```

åœ¨`package.json`ä¸­é…ç½®ï¼š

```json
"config": {
  "commitizen": {
    "path": "cz-conventional-changelog"
  }
}
```

æˆ–è€…åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`.czrc`ï¼Œå¹¶é…ç½®ï¼š

```json
{
  "path": "cz-conventional-changelog"
}
```

ä¸Šé¢ä¸¤ç§é…ç½®æ–¹å¼äºŒé€‰ä¸€å³å¯ã€‚éƒ½é…ç½®æ—¶ï¼Œæœ‰é™ä½¿ç”¨`.czrc`ä¸­çš„é…ç½®ã€‚

åœ¨`package.json`ä¸­é…ç½®Scripts

```json
"scripts": {
  "cz": "cz"
}
```

æ­¤æ—¶æ‰§è¡Œ`npm run cz`å¯çœ‹åˆ°å¦‚ä¸‹æç¤ºï¼ŒæŒ‰ç…§æç¤ºä¸€æ­¥æ­¥æ“ä½œå³å¯ï¼š

```shell
â¯ npm run cz

> vue3-code-spec-demo@0.0.0 cz
> cz

cz-cli@4.2.4, cz-conventional-changelog@3.2.0

? Select the type of change that you're committing: (Use arrow keys)
> feat:     A new feature
  fix:      A bug fix
  docs:     Documentation only changes
  style:    Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)
  refactor: A code change that neither fixes a bug nor adds a feature
  perf:     A code change that improves performance
  test:     Adding missing tests or correcting existing tests
(Move up and down to reveal more choices)
```



### è‡ªå®šä¹‰æç¤ºæ–‡æ¡ˆ - cz-customizable

å¦‚æœæƒ³è‡ªå·±å®šä¹‰æäº¤è§„èŒƒå’Œæç¤ºæ–‡æ¡ˆï¼Œé¦–å…ˆè¦å®‰è£…è‡ªå®šä¹‰è§„èŒƒçº¦æŸçš„åŒ…æ›¿æ¢ç¬¬ä¸‰æ–¹è§„èŒƒï¼š

```shell
npm i -D cz-customizable
```

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º`.cz-config.js`ï¼Œå¹¶é…ç½®è§„èŒƒï¼š

```js
module.exports = {
  types: [
    { value: 'init', name: 'init:     åˆå§‹æäº¤' },
    { value: 'feat', name: 'feat:          å¢åŠ æ–°åŠŸèƒ½' },
    { value: 'fix', name: 'fix:           ä¿®å¤bug' },
  	{ value: 'ui', name: 'ui:       æ›´æ–°UI' },
    { value: 'ğŸ“docs', name: 'docs:          ä¿®æ”¹æ–‡æ¡£' },
    { value: 'âš¡ï¸perf', name: 'perf:          æ€§èƒ½ä¼˜åŒ–' },
    { value: 'ğŸ‰init', name: 'ğŸ‰init:          åˆå§‹æäº¤' },
    { value: 'â•add', name: 'add:           æ·»åŠ ä¾èµ–' },
    { value: 'ğŸ”¨build', name: 'build:         æ‰“åŒ…' },
    { value: 'ğŸ”§chore', name: 'chore:         æ›´æ”¹é…ç½®æ–‡ä»¶' },
    { value: 'ğŸ‘·ci', name: 'ci:            CIéƒ¨ç½²' },
    { value: 'ğŸ”¥del', name: 'del:           åˆ é™¤ä»£ç /æ–‡ä»¶' },
    { value: 'â™»ï¸refactor', name: 'refactor:      ä»£ç é‡æ„' },
    { value: 'revert', name: 'revert:        ç‰ˆæœ¬å›é€€' },
    { value: 'style', name: 'style:         æ ·å¼ä¿®æ”¹ä¸å½±å“é€»è¾‘' },
    { value: 'test', name: 'test:          å¢åˆ æµ‹è¯•' },
    { value: 'release', name: 'release:  å‘å¸ƒ' },
    { value: 'deploy', name: 'deploy:   éƒ¨ç½²' }
  ],
  scopes: [
    { name: 'components' },
    { name: 'utils' },
    { name: 'styles' },
    { name: 'deps' },
    { name: 'other' }
  ],
  messages: {
    type: 'é€‰æ‹©æ›´æ”¹ç±»å‹:\n',
    // å¦‚æœallowcustomscopesä¸ºtrueï¼Œåˆ™ä½¿ç”¨
    scope: 'é€‰æ‹©ä¸€ä¸ª scopeï¼ˆå¯é€‰ï¼‰ï¼š\n',
    customScope: 'è¯·è¾“å…¥è‡ªå®šä¹‰çš„ scopeï¼š',
    subject: 'ç®€çŸ­æè¿°:\n',
    body: 'è¯¦ç»†æè¿°. ä½¿ç”¨"|"æ¢è¡Œ:\n',
    breaking: 'Breaking Changesåˆ—è¡¨:\n',
    footer: 'å…³é—­çš„issuesåˆ—è¡¨. E.g.: #9527, #666:\n',
    confirmCommit: 'ç¡®è®¤æäº¤?'
  },
  allowCustomScopes: true,
  allowBreakingChanges: ['feat', 'fix']
}
```

å¯ä»¥åœ¨æäº¤ä¿¡æ¯ä¸­åŠ ä¸ŠEmojiï¼Œå…·ä½“çš„é…ç½®è§„åˆ™å¯è§[Gihubä»“åº“](https://github.com/leoforfree/cz-customizable#options)ã€‚

æ‰§è¡Œ`npm run cz`ï¼Œå¯çœ‹åˆ°å¦‚ä¸‹æç¤ºï¼ŒæŒ‰ç…§æç¤ºä¸€æ­¥æ­¥æ“ä½œå³å¯ï¼š

```shell
â¯ npx cz
cz-cli@4.2.4, cz-customizable@6.9.0

All lines except first will be wrapped after 100 characters.
? é€‰æ‹©æ›´æ”¹ç±»å‹:
 (Use arrow keys)
> init:     åˆå§‹æäº¤
  feat:     å¢åŠ æ–°åŠŸèƒ½
  fix:      ä¿®å¤bug
  ui:       æ›´æ–°UI
  refactor: ä»£ç é‡æ„
  release:  å‘å¸ƒ
  deploy:   éƒ¨ç½²
(Move up and down to reveal more choices)
```

### è‡ªå®šä¹‰æç¤ºæ–‡æ¡ˆ- git-cz

ä¹Ÿå¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ä¸ªåº“ï¼Œ[git-cz](https://github.com/streamich/git-cz)æ¥è‡ªå®šä¹‰æäº¤è§„èŒƒå’Œæç¤ºæ–‡æ¡ˆã€‚

å®‰è£…åº“ï¼š

```shell
npm i -D git-cz
```

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º`changelog.config.js`ï¼Œå¹¶é…ç½®è§„èŒƒï¼š

```js
module.exports = {
  disableEmoji: false,
  format: '{type}{scope}: {emoji}{subject}',
  list: ['test', 'feat', 'fix', 'chore', 'docs', 'refactor', 'style', 'ci', 'perf'],
  maxMessageLength: 64,
  minMessageLength: 3,
  // å¯åˆ é™¤ä¸éœ€è¦çš„äº¤äº’æç¤ºé—®é¢˜
  questions: ['type', 'scope', 'subject', 'body', 'breaking', 'issues', 'lerna'],
  scopes: [],
  types: {
    chore: {
      description: 'Build process or auxiliary tool changes',
      emoji: 'ğŸ¤–',
      value: 'chore'
    },
    ci: {
      description: 'CI related changes',
      emoji: 'ğŸ¡',
      value: 'ci'
    },
    docs: {
      description: 'Documentation only changes',
      emoji: 'âœï¸',
      value: 'docs'
    },
    feat: {
      description: 'A new feature',
      emoji: 'ğŸ¸',
      value: 'feat'
    },
    fix: {
      description: 'A bug fix',
      emoji: 'ğŸ›',
      value: 'fix'
    },
    perf: {
      description: 'A code change that improves performance',
      emoji: 'âš¡ï¸',
      value: 'perf'
    },
    refactor: {
      description: 'A code change that neither fixes a bug or adds a feature',
      emoji: 'ğŸ’¡',
      value: 'refactor'
    },
    release: {
      description: 'Create a release commit',
      emoji: 'ğŸ¹',
      value: 'release'
    },
    style: {
      description: 'Markup, white-space, formatting, missing semi-colons...',
      emoji: 'ğŸ’„',
      value: 'style'
    },
    test: {
      description: 'Adding missing tests',
      emoji: 'ğŸ’',
      value: 'test'
    },
    messages: {
      type: 'Select the type of change that you\'re committing:',
      customScope: 'Select the scope this component affects:',
      subject: 'Write a short, imperative mood description of the change:\n',
      body: 'Provide a longer description of the change:\n ',
      breaking: 'List any breaking changes:\n',
      footer: 'Issues this commit closes, e.g #123:',
      confirmCommit: 'The packages that this commit has affected\n',
    },
  }
};
```

åœ¨`package.json`ä¸­é…ç½®ï¼š

```json
"config": {
  "commitizen": {
    "path": "git-cz"
  }
}
```

æˆ–è€…åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`.czrc`ï¼Œå¹¶é…ç½®ï¼š

```json
{
  "path": "git-cz"
}
```

ä¸Šé¢ä¸¤ç§é…ç½®æ–¹å¼äºŒé€‰ä¸€å³å¯ã€‚éƒ½é…ç½®æ—¶ï¼Œæœ‰é™ä½¿ç”¨`.czrc`ä¸­çš„é…ç½®ã€‚

åœ¨`package.json`ä¸­é…ç½®Scripts

```json
"scripts": {
  "cz": "cz"
}
```

æ­¤æ—¶æ‰§è¡Œ`npm run cz`å¯çœ‹åˆ°å¦‚ä¸‹æç¤ºï¼ŒæŒ‰ç…§æç¤ºä¸€æ­¥æ­¥æ“ä½œå³å¯ï¼š

```js
> npm run cz

> vue3-code-spec-demo@0.0.0 cz
> cz

cz-cli@4.2.4, git-cz@4.9.0

? Select the type of change that you're committing: (Use arrow keys or type to search)
> ğŸ’  test:       Adding missing tests 
  ğŸ¸  feat:       A new feature
  ğŸ›  fix:        A bug fix
  ğŸ¤–  chore:      Build process or auxiliary tool changes
  âœï¸  docs:       Documentation only changes
  ğŸ’¡  refactor:   A code change that neither fixes a bug or adds a feature
  ğŸ’„  style:      Markup, white-space, formatting, missing semi-colons...
(Move up and down to reveal more choices)
```




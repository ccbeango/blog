# 精通正则表达式

本书的目的不是提供具体问题的解决办法，而是教会读者利用正则表达式来思考，解决遇到的各种问题。

## 第1章 正则表达式入门

### 什么是正则表达式

完整的正则表达式由两种字符构成：特殊字符，如元字符`*`  和 普通文本字符。

类比日常语言，普通字符对应单词，特殊字符对应的就是语法。根据语言规则，按照语法把单词组合起来，就会得到能传达思想的文本。

完整的正则表达式由小的构建模块单元（building block unit）组成，每个单独的构建模块都很简单，不过因为它们能够以无穷多种方式组合，将它们结合起来实现特殊目标必须依靠经验。

### 行的起始^和结束$

脱字符号`^`代表一行的开始； 美元符号`$`代表一行的结束。

脱字符号`^`和美元符号`$`的特别之处就在于，**它们匹配的是一个位置，而不是具体的文本。**

最好能养成按照字符来理解正则表达式的习惯：

* 不要这样：`^cat`匹配以cat开头的行
* 而要按照字符解读：**`^cat`匹配的是以 c 作为一行的第一个字符，紧接一个 a，紧接一个 t 的文本。**

这两种理解的结果并无差异，但按照字符来解读更易于明白新遇到的正则表达式的内部逻辑。

![精通正则表达式1-01](https://cdn.staticaly.com/gh/ccbeango/blogImages@master/精通Regex/精通正则表达式1-01.png)

### 字符组[ ]

字符组的表达式为`[...]`，它的作用是列出在某处期望匹配的字符。

**例子：搜索单词`grey`或`gray`**

`[ea]`能够匹配到`a`或`e`，所以`/gr[ea]y/`就是先找到g，跟着是一个r，然后是
一个a或者e，最后是一个y。

注意：

* 在字符组以外，普通字符（例如`/gr[ae]y/`中的 g 和 r）都有**接下来是**（and then）的意思，首先匹配 g，接下来是 r ······
* 在字符组内部，情况完全相反，字符组的内容是在**同一个位置**能够匹配的若干字符，它的意思是**或**

#### 连字符

在**字符组内部**，连字符`-`表示一个范围，而且允许多重范围，也允许随意组合字符范围和普通文本：

* `[0-9]`、`[a-z]`：匹配**一个**数字、匹配**一个**小写字母
* `[0-9a-fA-F]`：匹配**一个**数字、小写字母 a 到 f或大写字母 A 到 F 。顺序无所谓，即等价于`[A-Fa-f0-9]`
* `[0-9A-Z_!.?]`：匹配**一个**数字、大写字母、下画线、惊叹号、点号，或问号
* 字符组开头的连字符只是一个普通的连字符号

在字符组内部，真正的特殊字符只有连字符，在字符组外部的特殊字符在内部仅是普通字符。**可以把字符组看作独立的微型语言。在字符组内部和外部，关于元字符的规定（哪些是元字符，以及它们的意义）是不同的**

### 排除型字符组






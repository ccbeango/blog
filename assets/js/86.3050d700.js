(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{402:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"proto编写风格指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#proto编写风格指南"}},[t._v("#")]),t._v(" Proto编写风格指南")]),t._v(" "),s("p",[t._v("此为是"),s("code",[t._v(".proto")]),t._v("文件的编写风格指南。按此约定，将使得Protocol Buffer的message定义和对应class保持一致性并易于阅读。")]),t._v(" "),s("p",[t._v("请注意，Protocol Buffer风格随着时间的推移而发展，因此您可能会看到以不同的约定或样式编写的"),s("code",[t._v(".proto")]),t._v("文件。修改这些文件时，请尊重现有样式。**一致性是关键。**但是，当创建新的.proto文件时，最好采用当前最佳风格。")]),t._v(" "),s("h2",{attrs:{id:"标准格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#标准格式"}},[t._v("#")]),t._v(" 标准格式")]),t._v(" "),s("ul",[s("li",[t._v("行长度保持在80个字符")]),t._v(" "),s("li",[t._v("使用2个空格缩进")]),t._v(" "),s("li",[t._v("字符串最好使用双引号")])]),t._v(" "),s("h2",{attrs:{id:"文件结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件结构"}},[t._v("#")]),t._v(" 文件结构")]),t._v(" "),s("p",[t._v("文件以小写下划线的格式命名："),s("code",[t._v("lower_snake_case.proto")])]),t._v(" "),s("p",[t._v("All files should be ordered in the following manner:")]),t._v(" "),s("ol",[s("li",[t._v("License header (if applicable)")]),t._v(" "),s("li",[t._v("File overview")]),t._v(" "),s("li",[t._v("Syntax")]),t._v(" "),s("li",[t._v("Package")]),t._v(" "),s("li",[t._v("Imports (sorted)")]),t._v(" "),s("li",[t._v("File options")]),t._v(" "),s("li",[t._v("Everything else")])]),t._v(" "),s("h2",{attrs:{id:"package-包名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-包名"}},[t._v("#")]),t._v(" package 包名")]),t._v(" "),s("p",[t._v("包名应小写。包名称应基于项目名称具有唯一的名称，并且可能基于包含protocol buffer类型定义的文件的路径。")]),t._v(" "),s("h2",{attrs:{id:"message和字段名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#message和字段名"}},[t._v("#")]),t._v(" message和字段名")]),t._v(" "),s("p",[t._v("message名使用大驼峰，如"),s("code",[t._v("SongServerRequest")]),t._v("。")]),t._v(" "),s("p",[t._v("字段名使用下划线分割名"),s("code",[t._v("underscore_separated_names")]),t._v("，包括oneof字段和扩展名，如"),s("code",[t._v("song_name")])]),t._v(" "),s("div",{staticClass:"language-protobuf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-protobuf"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("message")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SongServerRequest")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("optional")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" song_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("对字段名使用下面命名原则提供如下的访问器：")]),t._v(" "),s("div",{staticClass:"language-protobuf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-protobuf"}},[s("code",[t._v("C"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  const "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("song_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  void "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_song_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("const "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nJava"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" String "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSongName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" Builder "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSongName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("如果字段名包含数字，数字应该出现在字母之后，而不是下划线之后。例如，使用 "),s("code",[t._v("song_name1")]),t._v("代替 "),s("code",[t._v("song_name_1")])]),t._v(" "),s("h2",{attrs:{id:"repaeted-字段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#repaeted-字段"}},[t._v("#")]),t._v(" repaeted 字段")]),t._v(" "),s("p",[t._v("对"),s("code",[t._v("repeated")]),t._v("字段使用复数名称")]),t._v(" "),s("div",{staticClass:"language-protobuf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-protobuf"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("repeated")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" keys "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("repeated")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token positional-class-name class-name"}},[t._v("MyMessage")]),t._v(" accounts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"enums"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enums"}},[t._v("#")]),t._v(" Enums")]),t._v(" "),s("p",[t._v("对枚举类型名使用大驼峰，对值名使用大写加下划线"),s("code",[t._v("CAPITALS_WITH_UNDERSCORES")])]),t._v(" "),s("div",{staticClass:"language-protobuf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-protobuf"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FooBar")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  FOO_BAR_UNSPECIFIED "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  FOO_BAR_FIRST_VALUE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  FOO_BAR_SECOND_VALUE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("每个枚举值应以分号结尾，而不是逗号。宁愿在枚举值前面加上前缀，而不是将它们包围在一个封闭的消息中。零值的枚举应该有 "),s("code",[t._v("UNSPECIFIED")]),t._v("后缀。")]),t._v(" "),s("h2",{attrs:{id:"services"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#services"}},[t._v("#")]),t._v(" Services")]),t._v(" "),s("p",[t._v("如果使用"),s("code",[t._v(".proto")]),t._v("定义一个 RPC 服务，应该对服务名和任何 RPC 方法名使用大驼峰")]),t._v(" "),s("div",{staticClass:"language-protobuf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-protobuf"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("service")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FooService")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rpc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetSomethingRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetSomethingResponse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rpc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListSomethingRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListSomethingResponse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"things-to-avoid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#things-to-avoid"}},[t._v("#")]),t._v(" Things to avoid")]),t._v(" "),s("ul",[s("li",[t._v("Required fields (only for proto2)")]),t._v(" "),s("li",[t._v("Groups (only for proto2)")])])])}),[],!1,null,null,null);s.default=e.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{433:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"webpack的配置和处理css资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack的配置和处理css资源"}},[s._v("#")]),s._v(" Webpack的配置和处理CSS资源")]),s._v(" "),t("p",[s._v("代码仓库"),t("a",{attrs:{href:""}},[s._v("02_webpack配置文件(css)")])]),s._v(" "),t("h2",{attrs:{id:"webpack配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack配置文件"}},[s._v("#")]),s._v(" Webpack配置文件")]),s._v(" "),t("p",[s._v("在通常情况下，Webpack需要打包的项目是非常复杂的，并且我们需要一系列的配置来满足要求，默认配置必然是无法满足需求的。")]),s._v(" "),t("p",[s._v("比如，我们可以设置入口，设置输出，这些都可以通过命令行参数完成：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("webpack "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--entry")]),s._v(" ./src/main.js --output-path ./build\n")])])]),t("p",[s._v("但是，每次都输入相关参数过于繁琐，而且参数可能非常多，可读性差，我们可以使用配置文件来解决这一问题。")]),s._v(" "),t("p",[s._v("注：所有支持的参数可见官方文档"),t("a",{attrs:{href:"https://webpack.docschina.org/api/cli/",target:"_blank",rel:"noopener noreferrer"}},[s._v("命令行接口"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"默认配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#默认配置文件"}},[s._v("#")]),s._v(" 默认配置文件")]),s._v(" "),t("p",[s._v("可以在根目录下创建一个"),t("code",[s._v("webpack.config.js")]),s._v("文件，来作为Webpack的默认配置文件。")]),s._v(" "),t("p",[s._v("此时执行"),t("code",[s._v("webpack")]),s._v("命令打包，Webpack默认会去执行的根目录下查找此文件作为webpack的配置文件。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/main.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("filename")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bundle.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./build'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("ul",[t("li",[s._v("entry 指定入口文件")]),s._v(" "),t("li",[s._v("output 指定打包输出配置\n"),t("ul",[t("li",[s._v("filename 指定打包文件名")]),s._v(" "),t("li",[s._v("path 指定打包输出路径，要注意，必须是绝对路径，否则报错。")])])])]),s._v(" "),t("p",[t("code",[s._v("package.json")]),s._v("中配置执行脚本：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"build2"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("h3",{attrs:{id:"指定配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定配置文件"}},[s._v("#")]),s._v(" 指定配置文件")]),s._v(" "),t("p",[s._v("但是如果我们的配置文件并不是webpack.config.js的名字，而是其他的名字呢，比如我们将"),t("code",[s._v("webpack.config.js")]),s._v("修改成了"),t("code",[s._v("wk.config.js")]),s._v("；")]),s._v(" "),t("p",[s._v("这个时候我们可以通过 "),t("code",[s._v("--config")]),s._v(" 来指定对应的配置文件的路径：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("webpack "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--config")]),s._v(" ./wk.config.js\n")])])]),t("p",[s._v("我们通常会在"),t("code",[s._v("package.json")]),s._v("中配置执行脚本：")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build3"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack --config ./wk.config.js"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("p",[s._v("然后运行"),t("code",[s._v("npm run build")]),s._v("即可完成打包。")]),s._v(" "),t("h2",{attrs:{id:"webpack依赖图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack依赖图"}},[s._v("#")]),s._v(" Webpack依赖图")]),s._v(" "),t("blockquote",[t("p",[s._v("https://webpack.docschina.org/concepts/dependency-graph")])]),s._v(" "),t("p",[s._v("webpack到底是如何对我们的项目进行打包的呢？")]),s._v(" "),t("p",[s._v("事实上webpack在处理应用程序时，它会根据命令或者配置文件找到入口文件；")]),s._v(" "),t("p",[s._v("从入口开始，去查找所有依赖的文件，根据模块标识符，最终会生成一个"),t("strong",[s._v("依赖关系图")]),s._v("，这个依赖关系图会包含应用程序中所需的所有模块（比如.js文件、css文件、图片、\n字体等）。")]),s._v(" "),t("p",[s._v("依赖关系图是一个图结构，这其实就是利用"),t("strong",[s._v("JavaScript的模块依赖加载机制")]),s._v("，加载器会执行"),t("strong",[s._v("深度优先的依赖加载")]),s._v("。")]),s._v(" "),t("p",[s._v("然后遍历图结构，打包一个个模块（根据文件的不同使用不同的loader来解析）。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages@master/Webpack5/webpack%E7%9A%84%E9%85%8D%E7%BD%AE01.PNG",alt:"webpack的配置01"}})]),s._v(" "),t("p",[s._v("注：模块相关原理，详见《JavaScript高级程序设计》第26章 模块章节。")]),s._v(" "),t("h2",{attrs:{id:"css-loader的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#css-loader的使用"}},[s._v("#")]),s._v(" css-loader的使用")]),s._v(" "),t("p",[s._v("创建一个"),t("code",[s._v("component.js")]),s._v("的文件，通过JS创建一个元素，并且给它设置相关的样式")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../css/index.css'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" element "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createElement")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'div'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  element"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerHTML "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  element"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("classList"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'content'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" element"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\ndocument"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("appendChild")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("此时我们再执行"),t("code",[s._v("npm run build3")]),s._v("会出现报错：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ERROR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("css"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("css "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nModule parse failed"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Unexpected "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("token")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nYou may need an appropriate loader to handle "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v(" file type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" currently no loaders are configured to process "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v(" file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" See https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("concepts#loaders\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("content "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   color"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" red"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n @ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("js"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("component"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\n @ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("\n")])])]),t("p",[s._v("这里提示我们，需要一个loader来处理"),t("code",[s._v("index.css")]),s._v("文件。")]),s._v(" "),t("p",[s._v("上面的错误信息告诉我们需要一个loader来加载这个css文件，但是loader是什么呢？")]),s._v(" "),t("blockquote",[t("p",[s._v("Webpack 只能理解 JavaScript 和 JSON 文件，这是 Webpack 开箱可用的自带能力。"),t("strong",[s._v("loader")]),s._v(" 让 webpack 能够去处理其他类型的文件，并将它们转换为有效 "),t("a",{attrs:{href:"https://webpack.docschina.org/concepts/modules",target:"_blank",rel:"noopener noreferrer"}},[s._v("模块"),t("OutboundLink")],1),s._v("，以供应用程序使用，以及被添加到依赖图中。")])]),s._v(" "),t("p",[s._v("上面是官方解释，我们可以对loader做解释：")]),s._v(" "),t("ul",[t("li",[s._v("loader 可以用于对模块的源代码进行转换；")]),s._v(" "),t("li",[s._v("我们可以将css文件也看成是一个模块，我们是通过import来加载这个模块的")]),s._v(" "),t("li",[s._v("在加载这个模块时，webpack其实并不知道如何对其进行加载，我们必须指定对应的loader来完成这个功能")])]),s._v(" "),t("p",[s._v("对于加载css文件来说，我们需要一个可以读取css文件的loader，这个loader最常用的是"),t("code",[s._v("css-loader")])]),s._v(" "),t("p",[s._v("安装"),t("code",[s._v("css-loader")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" css-loader "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("h3",{attrs:{id:"loader的使用方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#loader的使用方式"}},[s._v("#")]),s._v(" loader的使用方式")]),s._v(" "),t("p",[s._v("loader有三种使用方式：")]),s._v(" "),t("ul",[t("li",[s._v("内联方式")]),s._v(" "),t("li",[s._v("CLI方式（webpack5中不再使用，webpack4中可以使用）")]),s._v(" "),t("li",[s._v("配置方式")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://webpack.docschina.org/concepts/loaders/#using-loaders",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1),s._v("中只有两种方式了。")]),s._v(" "),t("h4",{attrs:{id:"内联方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内联方式"}},[s._v("#")]),s._v(" 内联方式")]),s._v(" "),t("p",[s._v("在引入的样式前加上使用的loader，并且使用"),t("code",[s._v("!")]),s._v("分割；")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader!../css/index.css'")]),s._v("\n")])])]),t("p",[s._v("可以使用多个loader，并且使用"),t("code",[s._v("!")]),s._v("将资源中的laoder分割，如：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx-loader!yyy-loader!css-loader!../css/index.css'")]),s._v("\n")])])]),t("p",[s._v("内联方式使用较少，因为不方便管理。")]),s._v(" "),t("h4",{attrs:{id:"cli方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cli方式"}},[s._v("#")]),s._v(" CLI方式")]),s._v(" "),t("p",[s._v("在命令行中使用"),t("code",[s._v("--module-bind")]),s._v("参数指定loader")]),s._v(" "),t("p",[s._v("Webpack5不再支持。")]),s._v(" "),t("p",[s._v("实际应用中也比较少使用，因为不方便管理")]),s._v(" "),t("h4",{attrs:{id:"配置方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置方式"}},[s._v("#")]),s._v(" 配置方式")]),s._v(" "),t("p",[s._v("配置方式表示的意思是在我们的webpack配置文件中写明配置信息：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("module.rules")]),s._v("中允许我们配置多个loader**。loader 从右到左（或从下到上）地取值(evaluate)/执行(execute)。**")]),s._v(" "),t("li",[s._v("这种方式可以更好的表示loader的配置，也方便后期的维护，同时也让你对各个Loader有一个全局的概览；")])]),s._v(" "),t("p",[t("code",[s._v("module.rules")]),s._v("对应的是一个数组"),t("code",[s._v("[Rule, ...]")]),s._v("，数组中存放的是一个个的Rule，Rule是一个对象，对象中可以设置多个属性：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("test")]),s._v(" 用于对 resource（资源）进行匹配的，通常会设置成正则表达式；")]),s._v(" "),t("li",[t("code",[s._v("use")]),s._v(" 对应的值时一个数组：[UseEntry]\n"),t("ul",[t("li",[t("code",[s._v("UseEntry")]),s._v("是一个对象，可以通过对象的属性来设置一些其他属性\n"),t("ul",[t("li",[t("code",[s._v("loader")]),s._v(" "),t("strong",[s._v("必须")]),s._v("有一个 loader属性，对应的值是一个字符串，表示要使用的loader；")]),s._v(" "),t("li",[t("code",[s._v("options")]),s._v(" 可选的属性，值是一个字符串或者对象，值会被传入到loader中；")]),s._v(" "),t("li",[t("code",[s._v("query")]),s._v(" 目前已经使用options来替代；")])])]),s._v(" "),t("li",[t("code",[s._v("UseEntry")]),s._v("也可以是一个字符串，是"),t("code",[s._v("loader")]),s._v("属性的一种简写方式，如"),t("code",[s._v("use: [ 'style-loader' ]")]),s._v("，就是"),t("code",[s._v("use: [ { loader: 'style-loader'} ]")]),s._v("的简写。可以多个loader的简写。")])])]),s._v(" "),t("li",[t("code",[s._v("loader")]),s._v(" 此属性是"),t("code",[s._v("use")]),s._v("属性的简写，如"),t("code",[s._v("use: [ { loader: 'style-loader' } ]")]),s._v(" 的简写就是"),t("code",[s._v("loader: 'style-loader'")]),s._v("。只有一个loader时的简写")])]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /\\.css$/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 匹配资源")]),s._v("\n      use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// use完整写法")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'css-loader' "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// UseEntry")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// use: ['css-loader'], //  use的简写 写多个只有一个属性的loader")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// loader: 'css-loader', // use的简写 写一个loader的简写")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("上面配置就是，如果遇到"),t("code",[s._v("css")]),s._v("的文件，就使用"),t("code",[s._v("use")]),s._v("中配置的css-loader来进行转换。")]),s._v(" "),t("p",[s._v("此时再执行"),t("code",[s._v("npm run build3")]),s._v("可正常打包。")]),s._v(" "),t("h2",{attrs:{id:"认识style-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#认识style-loader"}},[s._v("#")]),s._v(" 认识style-loader")]),s._v(" "),t("p",[s._v("我们已经可以通过css-loader来加载css文件了，但是你会发现这个css在我们的代码中并没有生效（页面没有效果）。")]),s._v(" "),t("p",[s._v("这是因为css-loader只是负责将.css文件进行解析，并不会将解析之后的css插入到页面中；")]),s._v(" "),t("p",[s._v("如果我们希望再完成插入style的操作，那么我们还需要另外一个loader，就是style-loader；")]),s._v(" "),t("p",[s._v("安装style-loader：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" style-loader "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("p",[s._v("然后再配置style-loader：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("要注意，"),t("strong",[s._v("loader的执行顺序是从右向左（或者说从下到上，或者说从后到前的）")]),s._v("，所以我们需要将style-loader写到css-loader的前面；")]),s._v(" "),t("p",[s._v("再重新打包后，就可以看到页面中的"),t("code",[s._v("Hello webpack")]),s._v("变成了红色，当前的css是通过页内样式的方式添加进来的；")]),s._v(" "),t("p",[s._v("本质上这个loader会先创建一个style标签，然后再插入css样式。")]),s._v(" "),t("h2",{attrs:{id:"css预处理器文件处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#css预处理器文件处理"}},[s._v("#")]),s._v(" css预处理器文件处理")]),s._v(" "),t("p",[s._v("在我们开发中，我们可能会使用less、sass、stylus的预处理器来编写css样式，效率会更高。")]),s._v(" "),t("p",[s._v("那么，如何可以让我们的环境支持这些预处理器呢？")]),s._v(" "),t("p",[s._v("首先我们需要确定，less、sass等编写的css需要通过工具转换成普通的css；")]),s._v(" "),t("p",[s._v("我们创建一个"),t("code",[s._v("component.less")]),s._v("文件，并写入以下样式：")]),s._v(" "),t("div",{staticClass:"language-less extra-class"},[t("pre",{pre:!0,attrs:{class:"language-less"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@fontSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")])]),s._v(" 50px"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@fontWeight"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")])]),s._v(" 700"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".content")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("font-size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@fontSize")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("font-weight")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@fontWeight")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("我们首先需要将less代码转换成css代码，这里需要用到工具库"),t("code",[s._v("less")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("p",[s._v("执行如下命令：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("npx "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" ./src/css/component.less "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" component.css\n")])])]),t("p",[s._v("可以在根目录下看到这个转换后的css文件")]),s._v(" "),t("p",[s._v("在项目中我们会编写大量的less，它们如何可以自动转换呢？")]),s._v(" "),t("p",[s._v("我们通常会使用"),t("code",[s._v("less-loader")]),s._v("，来自动使用less工具转换less到css；"),t("strong",[s._v("本质上就是使用上面安装的"),t("code",[s._v("less")]),s._v("将我们的less代码转换成css代码。")])]),s._v(" "),t("p",[s._v("安装"),t("code",[s._v("less-loader")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" less-loader "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("p",[s._v("配置loader：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.less$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'less-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("执行"),t("code",[s._v("npm run build3")]),s._v("，less就可以自动转换成css，并且页面也会生效了。")]),s._v(" "),t("h2",{attrs:{id:"浏览器的兼容性问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的兼容性问题"}},[s._v("#")]),s._v(" 浏览器的兼容性问题")]),s._v(" "),t("p",[s._v("开发中，浏览器的兼容性问题，我们应该如何去解决和处理？")]),s._v(" "),t("p",[s._v("这里的兼容性问题不是指屏幕大小的变化适配；这里指的兼容性是针对不同的浏览器支持的特性：比如css特性、js语法，之间的兼容性；")]),s._v(" "),t("p",[s._v("我们知道市面上有大量的浏览器：")]),s._v(" "),t("ul",[t("li",[s._v("有Chrome、Safari、IE、Edge、Chrome for Android、UC Browser、QQ Browser等等；")]),s._v(" "),t("li",[s._v("它们的市场占率是多少？我们要不要兼容它们呢？")])]),s._v(" "),t("p",[s._v("我们在编写代码时，需要考虑某些兼容性问题，比如css中经常会给某些属性添加前缀来兼容不同的浏览器。")]),s._v(" "),t("p",[s._v("同一个浏览器版本不同，不同的浏览器之间，都会有兼容性的问题")]),s._v(" "),t("ul",[t("li",[s._v("比如有些浏览器不支持Promise、不支持"),t("code",[s._v("const")]),s._v("属性。")]),s._v(" "),t("li",[s._v("或者有些css中经常会给某些属性添加前缀来兼容不同的浏览器。")])]),s._v(" "),t("p",[s._v("现在这些问题都不需要自己去处理，目前前端工程化有对应的工具来处理。")]),s._v(" "),t("p",[s._v("这里css加前缀，可以使用工具"),t("code",[s._v("autoprefixer")]),s._v("，但是前缀是否要加，这是不确定的，比如项目只需要适配谷歌和火狐浏览器，那么就只需要加上这两个浏览器的前缀，其它浏览器的前缀不需要添加，如果全都添加就会平白增加无用代码。")]),s._v(" "),t("p",[s._v("对于JS代码也一样，比如哪些语法需要做转化，哪些语法不需要做就可以满足浏览器的需求，过多的转化是不需要的。")]),s._v(" "),t("p",[s._v("这些都取决于"),t("strong",[s._v("我们的项目到底需要适配哪些浏览器")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"浏览器市场占有率"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器市场占有率"}},[s._v("#")]),s._v(" 浏览器市场占有率")]),s._v(" "),t("p",[s._v("我们经常会在项目中会有类似下面的配置信息")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\nlast "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" versions\nnot dead\n")])])]),t("p",[s._v("一般会是配置文件"),t("code",[s._v(".browserslistrc")]),s._v("，或是在"),t("code",[s._v("package.json")]),s._v("中。")]),s._v(" "),t("p",[s._v("这些其实就是一个个的条件，提供给工具使用，告诉工具到底需要适配哪些浏览器。")]),s._v(" "),t("p",[s._v("这里的"),t("code",[s._v("1%")]),s._v("，就是指市场占有率。条件就是说市场占有率需要大于百分之一。")]),s._v(" "),t("p",[s._v("浏览器的市场占有率可以在网站"),t("a",{attrs:{href:"https://caniuse.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("caniuse.com"),t("OutboundLink")],1),s._v("中找到，网站中有一个功能"),t("a",{attrs:{href:"https://caniuse.com/usage-table",target:"_blank",rel:"noopener noreferrer"}},[s._v("Browser usage table"),t("OutboundLink")],1),s._v("，这里统计了常见浏览器的市场占有率。")]),s._v(" "),t("p",[s._v("这里包含了不同浏览器不同版本当前的市场占有率。")]),s._v(" "),t("h3",{attrs:{id:"认识browserslist工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#认识browserslist工具"}},[s._v("#")]),s._v(" 认识browserslist工具")]),s._v(" "),t("p",[s._v("有一个问题，我们如何可以在css兼容性和js兼容性下共享我们配置的兼容性条件呢？")]),s._v(" "),t("ul",[t("li",[s._v("就是当我们设置了一个条件： > 1%；")]),s._v(" "),t("li",[s._v("我们表达的意思是css要兼容市场占有率大于1%的浏览器，js也要兼容市场占有率大于1%的浏览器；")]),s._v(" "),t("li",[s._v("如果我们是通过工具来达到这种兼容性的，比如后面我们会讲到的postcss-prest-env、babel、autoprefixer等")])]),s._v(" "),t("p",[s._v("那么如何可以让他们共享我们的配置呢？")]),s._v(" "),t("ul",[t("li",[s._v("这个问题的答案就是Browserslist；")])]),s._v(" "),t("p",[s._v("Browserslist是一个在不同的前端工具之间，共享目标浏览器和Node.js版本的配置。这些不同的前端工具包括：")]),s._v(" "),t("ul",[t("li",[s._v("Autoprefixer")]),s._v(" "),t("li",[s._v("Babel")]),s._v(" "),t("li",[s._v("postcss-preset-env")]),s._v(" "),t("li",[s._v("eslint-plugin-compat")]),s._v(" "),t("li",[s._v("stylelint-no-unsupported-browser-features")]),s._v(" "),t("li",[s._v("postcss-normalize")]),s._v(" "),t("li",[s._v("obsolete-webpack-plugin")])]),s._v(" "),t("p",[s._v("这些工具都需要通过共享配置"),t("code",[s._v("Browserslist")]),s._v("来决定需要兼容哪些浏览器，最终需要转换成什么样子的代码。")]),s._v(" "),t("h3",{attrs:{id:"browserslist编写规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#browserslist编写规则"}},[s._v("#")]),s._v(" Browserslist编写规则")]),s._v(" "),t("p",[s._v("开发中常用的规则：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("defaults")]),s._v("：Browserslist的默认浏览器（> 0.5%, last 2 versions, Firefox ESR, not dead）")]),s._v(" "),t("li",[t("code",[s._v("5%")]),s._v("：通过全局使用情况统计信息选择的浏览器版本。 >=，<或<=。\n"),t("ul",[t("li",[s._v("5% in US：使用美国使用情况统计信息。它接受两个字母的国家/地区代码。")]),s._v(" "),t("li",[s._v(">5% in alt-AS：使用亚洲地区使用情况统计信息。有关所有区域代码的列表，请参见caniuse-lite/data/regions")]),s._v(" "),t("li",[s._v(">5% in my stats：使用自定义用法数据。")]),s._v(" "),t("li",[s._v("> 5% in browserslist-config-mycompany stats：使用来自自定义使用情况数据browserslist-config-mycompany/browserslist-stats.json")]),s._v(" "),t("li",[s._v("cover 99.5%：提供覆盖率的最受欢迎的浏览器。")]),s._v(" "),t("li",[s._v("cover 99.5% in US：与上述相同，但国家/地区代码由两个字母组成。")]),s._v(" "),t("li",[s._v("cover 99.5% in my stats：使用自定义用法数据。")])])]),s._v(" "),t("li",[t("code",[s._v("dead")]),s._v("：24个月内没有官方支持或更新的浏览器。现在已被判定死亡的浏览器有IE 10，IE_Mob 11，BlackBerry 10，BlackBerry 7， Samsung 4和OperaMobile 12.1。\n"),t("ul",[t("li",[s._v("也会配合"),t("code",[s._v("not")]),s._v("来使用，即"),t("code",[s._v("not dead")]),s._v("，表示未死亡的浏览器")])])]),s._v(" "),t("li",[s._v("last 2 versions：每个浏览器的最后2个版本。\n"),t("ul",[t("li",[s._v("last 2 Chrome versions：最近2个版本的Chrome浏览器。")]),s._v(" "),t("li",[s._v("last 2 major versions或last 2 iOS major versions：最近2个主要版本的所有次要/补丁版本。")])])])]),s._v(" "),t("p",[s._v("不常用的配置：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("node 10和node 10.4：选择最新的Node.js10.x.x 或10.4.x版本。")]),s._v(" "),t("ul",[t("li",[s._v("current node：Browserslist现在使用的Node.js版本。")]),s._v(" "),t("li",[s._v("maintained node versions：所有Node.js版本，仍由 Node.js Foundation维护。")])])]),s._v(" "),t("li",[t("p",[s._v("iOS 7：直接使用iOS浏览器版本7。")]),s._v(" "),t("ul",[t("li",[s._v("Firefox > 20：Firefox的版本高于20，"),t("code",[s._v(">=")]),s._v("、"),t("code",[s._v("<")]),s._v("或"),t("code",[s._v("<=")]),s._v("也可以使用。它也可以与Node.js一起使用。")]),s._v(" "),t("li",[s._v("ie 6-8：选择一个包含范围的版本。")]),s._v(" "),t("li",[s._v("Firefox ESR：最新的[Firefox ESR]版本。")]),s._v(" "),t("li",[s._v("PhantomJS 2.1和PhantomJS 1.9：选择类似于PhantomJS运行时的Safari版本。")])])]),s._v(" "),t("li",[t("p",[s._v("extends browserslist-config-mycompany：从browserslist-config-mycompanynpm包中查询 。")])]),s._v(" "),t("li",[t("p",[s._v("supports es6-module：支持特定功能的浏览器。 es6-module这是“我可以使用” 页面feat的URL上的参数。有关所有可用功能的列表，请参见 caniuse-\nlite/data/features")])]),s._v(" "),t("li",[t("p",[s._v("browserslist config：在Browserslist配置中定义的浏览器。在差异服务中很有用，可用于修改用户的配置，例如 browserslist config and supports es6-module。")])]),s._v(" "),t("li",[t("p",[s._v("since 2015或last 2 years：自2015年以来发布的所有版本（since 2015-03以及since 2015-03-10）。")])]),s._v(" "),t("li",[t("p",[s._v("unreleased versions或unreleased Chrome versions：Alpha和Beta版本。")])]),s._v(" "),t("li",[t("p",[s._v("not ie <= 8：排除先前查询选择的浏览器。")])])]),s._v(" "),t("h3",{attrs:{id:"浏览器查询过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器查询过程"}},[s._v("#")]),s._v(" 浏览器查询过程")]),s._v(" "),t("p",[s._v("我们可以编写类似于这样的配置:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\nlast "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" versions\nnot dead\n")])])]),t("p",[s._v("那么之后，这些工具会根据我们的配置来获取相关的浏览器信息，以方便决定是否需要进行兼容性的支持：")]),s._v(" "),t("ul",[t("li",[s._v("条件查询使用的是"),t("code",[s._v("caniuse-lite")]),s._v("的工具，这个工具的数据来自于"),t("code",[s._v("caniuse")]),s._v("的网站上")]),s._v(" "),t("li",[s._v("最终借助"),t("code",[s._v("caniuse-lite")]),s._v("来查询"),t("code",[s._v("browserslist")]),s._v("的配置所适配的浏览器。")]),s._v(" "),t("li",[s._v("我们在安装webpack时，安装了"),t("code",[s._v("browserslist")]),s._v("这个库，其中就有对"),t("code",[s._v("caniuse-lite")]),s._v("工具的使用。")])]),s._v(" "),t("h3",{attrs:{id:"使用browerslist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用browerslist"}},[s._v("#")]),s._v(" 使用browerslist")]),s._v(" "),t("h4",{attrs:{id:"命令行中使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令行中使用"}},[s._v("#")]),s._v(" 命令行中使用")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ npx browserslist "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('">1%, last 2 versions, not dead"')]),s._v("\nand_chr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nand_ff "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v("\nand_qq "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.4")]),s._v("\nand_uc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.12")]),s._v("\nandroid "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v("\nbaidu "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.12")]),s._v("\nchrome "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nchrome "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v("\nchrome "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v("\nedge "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v("\nedge "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v("\nfirefox "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v("\nfirefox "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v("\nie "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\nios_saf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.4")]),s._v("\nios_saf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.2")]),s._v("-15.3\nios_saf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.5")]),s._v("-14.8\nkaios "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v("\nop_mini all\nop_mob "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("\nopera "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v("\nopera "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("82")]),s._v("\nsafari "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.4")]),s._v("\nsafari "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.2")]),s._v("-15.3\nsamsung "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16.0")]),s._v("\n\n")])])]),t("p",[t("code",[s._v(">1%, last 2 version, not dead")]),s._v("匹配到浏览器如上，也就是说打包编译的代码只会支持上述浏览器。")]),s._v(" "),t("h4",{attrs:{id:"配置使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置使用"}},[s._v("#")]),s._v(" 配置使用")]),s._v(" "),t("p",[s._v("有两种方案：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("方案一：在"),t("code",[s._v("package.json")]),s._v("中配置；取并集，满足其中一个即可")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"browerslist"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"> 1%"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"last 2 versions"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"not dead"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("方案二：单独的一个配置文件"),t("code",[s._v(".browserslistrc")]),s._v("文件； 换行相当于取并集，满足其中一个即可")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\nlast "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" versions\nnot dead\n")])])])])]),s._v(" "),t("p",[s._v("上面的配置，在前端工具编译时，会自动去查找使用browerslist的配置。")]),s._v(" "),t("p",[s._v("这时我们可以进行验证，在命令行中输入"),t("code",[s._v("npx browserslist")]),s._v("，默认就会去读取我们写的配置，输出结果和命令行中的输出结果相同。")]),s._v(" "),t("h4",{attrs:{id:"默认配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#默认配置"}},[s._v("#")]),s._v(" 默认配置")]),s._v(" "),t("p",[s._v("如果没有设置配置，就会使用默认配置")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("browserslist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'> 0.5%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'last 2 versions'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Firefox ESR'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'not dead'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h4",{attrs:{id:"配置条件关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置条件关系"}},[s._v("#")]),s._v(" 配置条件关系")]),s._v(" "),t("p",[s._v("我们编写多个条件，多个条件的关系如下：")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("or")]),s._v("或"),t("code",[s._v(",")]),s._v("表示取并集，满足其中一个条件即可")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("如"),t("code",[s._v("> 0.5% or last 2 versions")]),s._v(" 表示占有率大于"),t("code",[s._v("0.5%")]),s._v("或每个浏览器最近两个版本")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("> 0.5%, last 2 versions")]),s._v(" 同上")])]),s._v(" "),t("li",[t("p",[s._v("换行也是并集，同上")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\nlast "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" versions\nnot dead\n")])])])])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("and")]),s._v("，相当于取交集，表示必须同时满足所有条件")]),s._v(" "),t("ul",[t("li",[s._v("如"),t("code",[s._v("> 0.5% and last 2 versions")]),s._v("表示占有率大于"),t("code",[s._v("0.5%")]),s._v("并且是最近两个版本的浏览器")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("not")]),s._v("，相当于取反")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("> 0.5% and not last 2 versions")]),s._v(" 占有率大于"),t("code",[s._v("0.5%")]),s._v("并不是最近两个版本的浏览器")]),s._v(" "),t("li",[t("code",[s._v("> 0.5% or not last 2 versions")]),s._v(" 占有率大于"),t("code",[s._v("0.5%")]),s._v("或者不是最近两个版本的浏览器")]),s._v(" "),t("li",[t("code",[s._v("> 0.5%, not last 2 versions")]),s._v(" 占有率大于"),t("code",[s._v("0.5%")]),s._v("或者不是最近两个版本的浏览器")])])])]),s._v(" "),t("p",[s._v("有时，我们在运行项目中会看到如下提示：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("rowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\nWhy you should "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" it regularly:\nhttps://github.com/browserslist/browserslist"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#browsers-data-updating")]),s._v("\n")])])]),t("p",[s._v("这是提示我们需要更新"),t("code",[s._v(".browserslistrc")]),s._v("中的配置，推荐运行上面的命令进行更新，上面链接中官方也给出了这么做的好处。")]),s._v(" "),t("h2",{attrs:{id:"postcss使用学习"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#postcss使用学习"}},[s._v("#")]),s._v(" PostCSS使用学习")]),s._v(" "),t("h3",{attrs:{id:"认识postcss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#认识postcss"}},[s._v("#")]),s._v(" 认识PostCSS")]),s._v(" "),t("blockquote",[t("p",[s._v("https://github.com/postcss/postcss/blob/main/docs/README-cn.md")]),s._v(" "),t("p",[s._v("PostCSS 是一个允许使用 JS 插件转换样式的工具。 这些插件可以检查（lint）你的 CSS，支持 CSS Variables 和 Mixins， 编译尚未被浏览器广泛支持的先进的 CSS 语法，内联图片，以及其它很多优秀的功能。")]),s._v(" "),t("p",[s._v("PostCSS 接收一个 CSS 文件并提供了一个 API 来分析、修改它的规则（通过把 CSS 规则转换成一个"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E6%8A%BD%E8%B1%A1%E8%AA%9E%E6%B3%95%E6%A8%B9",target:"_blank",rel:"noopener noreferrer"}},[s._v("抽象语法树"),t("OutboundLink")],1),s._v("的方式）。在这之后，这个 API 便可被许多"),t("a",{attrs:{href:"https://github.com/postcss/postcss#plugins",target:"_blank",rel:"noopener noreferrer"}},[s._v("插件"),t("OutboundLink")],1),s._v("利用来做有用的事情，比如寻错或自动添加 CSS vendor 前缀。")])]),s._v(" "),t("p",[s._v("PostCSS是一个通过JavaScript来转换样式的工具；它是一个独立的工具。")]),s._v(" "),t("p",[s._v("这个工具可以帮助我们进行一些CSS的转换和适配，比如自动添加浏览器前缀、css样式的重置；但是实现这些工具，我们需要借助于PostCSS对应的插件。")]),s._v(" "),t("p",[s._v("PostCSS本身提供的功能是很少的，只是将CSS文件转换成语法树，然后我们再使用这个工具相关的插件，做相关的转换。")]),s._v(" "),t("p",[s._v("使用PostCSS呢主要有是两个步骤：")]),s._v(" "),t("ul",[t("li",[s._v("第一步：查找PostCSS在构建工具中的扩展，比如webpack中的postcss-loader；")]),s._v(" "),t("li",[s._v("第二步：选择需要的PostCSS相关的插件；")])]),s._v(" "),t("h3",{attrs:{id:"命令行中使用postcss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令行中使用postcss"}},[s._v("#")]),s._v(" 命令行中使用PostCSS")]),s._v(" "),t("p",[s._v("如果想单独在命令行中使用PostCSS，需要安装一个命令行的依赖"),t("code",[s._v("postcss-cli")]),s._v("。")]),s._v(" "),t("p",[s._v("安装"),t("code",[s._v("postcss")]),s._v("、"),t("code",[s._v("postcss-cli")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" postcss postcss-cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("p",[s._v("接下来例子是给css样式添加各个浏览器前缀：")]),s._v(" "),t("p",[s._v("编写css文件"),t("code",[s._v("postcss-autofixer.css")])]),s._v(" "),t("div",{staticClass:"language-css extra-class"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(":fullscreen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".example")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("display")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" grid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("transition")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" all .5s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("user-select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("linear-gradient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to bottom"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" white"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" black"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("命令行中执行命令")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npx postcss "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("css "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\\src\\css\\postcss"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("autofixer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("css\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// You did not set any plugins, parser, or stringifier. Right now, PostCSS does nothing. Pick plugins for your case on https://www.postcss.parts/ and use them in postcss.config.js.")]),s._v("\n")])])]),t("p",[s._v("输出提示告诉我们，PostCss什么都没做，我们查看输出文件"),t("code",[s._v("test.css")]),s._v("，会发现输出文件和输入文件没有区别，只是输出文件中多了sourceMappingURL的注释。")]),s._v(" "),t("p",[s._v("就像我们上面提到的，PostCSS本身什么都没做，只是将CSS转换成了抽象语法树，再将语法树转换成css代码输出，这个过程中，由于中间没有使用任何插件，css还保持了原样输出。所以输出文件和原文件一样。")]),s._v(" "),t("p",[s._v("我们需要配合插件"),t("code",[s._v("autofixer")]),s._v("，给我们的css代码增加前缀，安装插件：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" autoprefixer "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("p",[s._v("再次执行命令，并且指定使用"),t("code",[s._v("autoprefixer")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("npx postcss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--use")]),s._v(" autoprefixer "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" test.css ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("src"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("postcss-autofixer.css\n")])])]),t("p",[s._v("我们可以看到输出文件"),t("code",[s._v("test.css")]),s._v("如下：")]),s._v(" "),t("div",{staticClass:"language-css extra-class"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(":-webkit-full-screen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(":-ms-fullscreen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(":fullscreen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".example")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("display")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" grid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("transition")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" all .5s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("-webkit-user-select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("-moz-user-select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("-ms-user-select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("user-select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("linear-gradient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to bottom"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" white"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" black"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("注：可以在此网站线上查看autofixer处理CSS属性情况：https://autoprefixer.github.io/")]),s._v(" "),t("p",[s._v("我们还可以看到，"),t("code",[s._v("transition: all .5s;")]),s._v("属性没有做任何处理，这是因为PostCSS在读取"),t("code",[s._v(".browserslistrc")]),s._v("文件的配置后，认为需要适配的浏览器默认都已经支持"),t("code",[s._v("transition")]),s._v("属性了。")]),s._v(" "),t("h3",{attrs:{id:"构建工具中使用postcss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建工具中使用postcss"}},[s._v("#")]),s._v(" 构建工具中使用PostCSS")]),s._v(" "),t("blockquote",[t("p",[s._v("https://github.com/webpack-contrib/postcss-loader")])]),s._v(" "),t("p",[s._v("真实开发中我们必然不会直接使用命令行工具来对css进行处理，而是借助于构建工具，在webpack中使用postcss就是使用"),t("code",[s._v("postcss-loader")]),s._v("来处理的")]),s._v(" "),t("p",[s._v("安装：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" postcss-loader "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("h4",{attrs:{id:"使用autoprefixer插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用autoprefixer插件"}},[s._v("#")]),s._v(" 使用autoprefixer插件")]),s._v(" "),t("p",[s._v("修改加载css的loader")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /\\.css$/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    'style-loader'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    'css-loader'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'postcss-loader'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        postcssOptions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// require('autoprefixer')")]),s._v("\n            'autoprefixer' "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 简写")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("p",[s._v("因为postcss需要有对应的插件才会起效果，所以我们需要配置它的plugin，这里已安装"),t("code",[s._v("autoprefixer")]),s._v("插件。")]),s._v(" "),t("p",[s._v("再执行"),t("code",[s._v("npm run build3")]),s._v("可以看到效果")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages@master/Webpack5/webpack%E7%9A%84%E9%85%8D%E7%BD%AE02.png",alt:"webpack的配置02"}})]),s._v(" "),t("p",[s._v("执行原理和我们命令行中使用原理相同，PostCSS将CSS转化成抽象语法树，然后通过"),t("code",[s._v("autoprefixer")]),s._v("插件的处理，它会根据"),t("code",[s._v(".browserslistrc")]),s._v("的配置，读取需要兼容的浏览器，给需要兼容的CSS属性加上对应的前缀，输出对应的CSS。")]),s._v(" "),t("p",[s._v("这里如果我们修改"),t("code",[s._v(".browserslistrc")]),s._v("的配置为")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("last "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" version\n")])])]),t("p",[s._v("再次执行"),t("code",[s._v("npm run build3")]),s._v("，生成的结果如下，我们可以看到"),t("code",[s._v("transition")]),s._v("和"),t("code",[s._v("background")]),s._v("属性也加上了对应的前缀来兼容需要适配的浏览器。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages@master/Webpack5/webpack%E7%9A%84%E9%85%8D%E7%BD%AE03.png",alt:"webpack的配置03"}})]),s._v(" "),t("h4",{attrs:{id:"单独的postcss配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单独的postcss配置文件"}},[s._v("#")]),s._v(" 单独的postcss配置文件")]),s._v(" "),t("p",[s._v("如果我们需要在多个loader中使用postcss，如我们还编写了less的样式文件，我们可将上面写的postcss配置，再复制一份粘贴到解析less的规则中，完整如下：")]),s._v(" "),t("div",{staticClass:"language-json {16-26,34-43 } extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("const path = require('path')\n\nmodule.exports = "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  entry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" './src/main.js'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  output"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'bundle.js'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path.resolve(__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" './build')\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /\\.css$/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 匹配资源")]),s._v("\n        use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          'style-loader'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          'css-loader'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'postcss-loader'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              postcssOptions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// require('autoprefixer')")]),s._v("\n                  'autoprefixer' "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 简写")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /\\.less$/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'style-loader' "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'css-loader' "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 再复制粘贴一份相同的")]),s._v("\n            loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'postcss-loader'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              postcssOptions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                  'autoprefixer'\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'less-loader' "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("显然这是不合理的，我们可以将PostCss的配置单独写在根据目录的配置文件"),t("code",[s._v("postcss.config.js")]),s._v("中，对"),t("code",[s._v("postcss")]),s._v("的插件配置进行抽离：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postcss-preset-env'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("那么webpack的配置文件中，只需要写"),t("code",[s._v("postcss-loader")]),s._v("即可，如下")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/main.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("filename")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bundle.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./build'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 匹配资源")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// use: [ // 完整写法")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   { loader: 'css-loader' } // UseEntry")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ],")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// use: ['css-loader'], //  use的简写 写多个只有一个属性的loader")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// loader: 'css-loader', // use的简写 只写一个loader")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postcss-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只需这样写即可")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.less$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postcss-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只需这样即可")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'less-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("此时，再执行"),t("code",[s._v("npm run build3")]),s._v("构建，"),t("code",[s._v("postcss-loader")]),s._v("会去读取根目录下"),t("code",[s._v("postcss.config.js")]),s._v("的配置插件信息进行处理，会得到相同的编译结果，可在浏览器中查看效果。")]),s._v(" "),t("h4",{attrs:{id:"使用postcss-preset-env插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用postcss-preset-env插件"}},[s._v("#")]),s._v(" 使用postcss-preset-env插件")]),s._v(" "),t("blockquote",[t("p",[s._v("PostCSS Preset Env lets you convert modern CSS into something most browsers can understand, determining the polyfills you need based on your targeted browsers or runtime environments.")])]),s._v(" "),t("p",[s._v("事实上，在配置postcss-loader时，我们配置插件并不需要使用autoprefixer。")]),s._v(" "),t("p",[s._v("我们可以使用另外一个插件："),t("a",{attrs:{href:"https://github.com/jonathantneal/postcss-preset-env",target:"_blank",rel:"noopener noreferrer"}},[s._v("postcss-preset-env"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("ul",[t("li",[s._v("它可以帮助我们将一些现代的CSS特性，转成大多数浏览器认识的CSS，并且会根据目标浏览器或者运行时环境添加所需的polyfill")]),s._v(" "),t("li",[s._v("也包括会自动帮助我们添加autoprefixer（所以相当于已经内置了autoprefixer）")])]),s._v(" "),t("p",[s._v("首先，我们需要安装postcss-preset-env：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" postcss-preset-env "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" \n")])])]),t("p",[s._v("然后在配置文件"),t("code",[s._v("postcss.config.js")]),s._v("中配置插件")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// require('autoprefixer')")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'autoprefixer', // 不再需要")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// require('postcss-preset-env')")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postcss-preset-env'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 简写")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("注意：我们在使用某些postcss插件时，也可以直接传入字符串，"),t("code",[s._v("autoprefixer")]),s._v("和"),t("code",[s._v("postcss-preset-env")]),s._v("都可以，它们都会默认加上"),t("code",[s._v("require()")]),s._v("。具体是否可以简写，要看对应的插件是否支持。")]),s._v(" "),t("p",[s._v("一个例子：")]),s._v(" "),t("ul",[t("li",[s._v("这里在使用十六进制的颜色时设置了8位；")]),s._v(" "),t("li",[s._v("但是某些浏览器可能不认识这种语法，我们最好可以转成RGBA的形式；")]),s._v(" "),t("li",[s._v("但是autoprefixer是不会帮助我们转换的（只会处理前缀）")]),s._v(" "),t("li",[s._v("而postcss-preset-env就可以完成这样的功能；")])]),s._v(" "),t("p",[s._v("index.css文件：")]),s._v(" "),t("div",{staticClass:"language-css extra-class"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v(" ")]),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".content")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" #12345678"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(":fullscreen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".example")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("display")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" grid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("transition")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" all .5s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("user-select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("linear-gradient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to bottom"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" white"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" black"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),t("p",[s._v("效果如下，不仅加上了前缀，而且处理了16进制的8位颜色设置:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages@master/Webpack5/webpack%E7%9A%84%E9%85%8D%E7%BD%AE04.png.png",alt:"webpack的配置04"}})]),s._v(" "),t("h4",{attrs:{id:"css-loader的一个属性importloaders"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#css-loader的一个属性importloaders"}},[s._v("#")]),s._v(" css-loader的一个属性"),t("code",[s._v("importLoaders")])]),s._v(" "),t("p",[s._v("当我们在一个css模块"),t("code",[s._v("index.css")]),s._v("中，导入另一个css模块"),t("code",[s._v("normalize.css")])]),s._v(" "),t("div",{staticClass:"language-css extra-class"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[t("span",{pre:!0,attrs:{class:"token atrule"}},[t("span",{pre:!0,attrs:{class:"token rule"}},[s._v("@import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./normalize.css"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".content")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" #12345678"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(":fullscreen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".example")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("display")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" grid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("transition")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" all .5s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("user-select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("linear-gradient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to bottom"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" white"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" black"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("code",[s._v("normalize.css")])]),s._v(" "),t("div",{staticClass:"language-css extra-class"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* normalize.css */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(":fullscreen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("border-radius")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 10px"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("此时直接执行"),t("code",[s._v("npm run build3")]),s._v("，会看到"),t("code",[s._v("nromalize.css")]),s._v("没有进行前缀处理，这是为什么呢？")]),s._v(" "),t("p",[s._v("因为在配置处理CSS的loader中，前缀处理是在"),t("code",[s._v("postcss-loader")]),s._v("阶段处理的，当结束时，会进入下一个"),t("code",[s._v("css-loader")]),s._v("的处理流程，此时解析到"),t("code",[s._v('@import "./normalize.css";')]),s._v("模块，那么就已经过了前缀处理的loader，webpack并不会自动倒回进行加前缀处理。")]),s._v(" "),t("p",[s._v("此时可以配置"),t("code",[s._v("css-loader")]),s._v("的一个参数"),t("code",[s._v("importLoaders")]),s._v("，这个选项允许配置在 "),t("code",[s._v("css-loader")]),s._v(" 之前有多少 loader 应用于 "),t("code",[s._v("@import")]),s._v("导入的CSS 模块。")]),s._v(" "),t("p",[s._v("修改webpack配置如下")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/main.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("filename")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bundle.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./build'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 匹配资源")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'css-loader',")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("options")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("importLoaders")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postcss-loader'")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.less$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// { loader: 'css-loader' },")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("options")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("importLoaders")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postcss-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'less-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("可以看到在"),t("code",[s._v("css")]),s._v("和"),t("code",[s._v("less")]),s._v("的Rule中，都添加了"),t("code",[s._v("importLoaders")]),s._v("属性：")]),s._v(" "),t("ul",[t("li",[s._v("0是默认值，表示不需要回溯Loader处理")]),s._v(" "),t("li",[s._v("1表示前面有一个loader；2 表示前面有两个，以此类推")])]),s._v(" "),t("p",[s._v("那么再次运行"),t("code",[s._v("npm run build3")]),s._v("可以看到，编译结果中"),t("code",[s._v("normalize.css")]),s._v("也被正常处理了。")])])}),[],!1,null,null,null);t.default=n.exports}}]);
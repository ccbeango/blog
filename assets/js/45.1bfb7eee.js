(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{362:function(a,s,t){"use strict";t.r(s);var n=t(1),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"linux下搭建lnmp环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux下搭建lnmp环境"}},[a._v("#")]),a._v(" Linux下搭建LNMP环境")]),a._v(" "),s("p",[s("strong",[a._v("装环境之前，首先配置好yum源")])]),a._v(" "),s("h2",{attrs:{id:"一、安装php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、安装php"}},[a._v("#")]),a._v(" 一、安装PHP")]),a._v(" "),s("h3",{attrs:{id:"_1-安装php的必要依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装php的必要依赖"}},[a._v("#")]),a._v(" 1. 安装php的必要依赖")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" gcc gcc-c++ openssl openssl-devel bzip2-devel libxslt libxslt-devel libmcrypt libmcrypt-devel libxml2 libxml2-devel autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel  zlib zlib-devel glibc glibc-devel glib2 glib2-devel\n")])])]),a._v(" "),s("h3",{attrs:{id:"_2-获取安装包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-获取安装包"}},[a._v("#")]),a._v(" 2.获取安装包")]),a._v(" "),s("p",[a._v("官网上下载需要的包，解压进入解压目录。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" php-7.0.22.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" php-7.0.22\n")])])]),s("h3",{attrs:{id:"_3-配置安装变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置安装变量"}},[a._v("#")]),a._v(" 3.配置安装变量")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("./configure "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--prefix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/php  --enable-fpm  --enable-mysqlnd --with-mysqli"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysqlnd --with-pdo-mysql"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysqlnd --with-iconv-dir --with-freetype-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/freetype --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr --enable-xml --disable-rpath --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex --enable-mbstring --enable-intl --with-mcrypt --enable-ftp --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --with-gettext --enable-fileinfo --enable-opcache --with-xsl --with-xpm-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr\n")])])]),s("p",[s("code",[a._v("--with-fpm-user=admin --with-fpm-group=admin")]),a._v(" 如果需要设置php-fpm的用户和用户组，加上这个 不用的话别加，要不然后面启动的时候会报错")]),a._v(" "),s("blockquote",[s("p",[a._v("ERROR: [pool www] cannot get uid for user 'admin'")]),a._v(" "),s("p",[a._v("ERROR: FPM initialization failed")])]),a._v(" "),s("p",[a._v("此时，找到php-fpm的配置文件修改user=nobody group=nobody 如果谁都可以启的话")]),a._v(" "),s("p",[a._v("报错：")]),a._v(" "),s("blockquote",[s("p",[a._v("configure: error: mcrypt.h not found. Please reinstall libmcrypt.")])]),a._v(" "),s("p",[a._v("解决： "),s("code",[a._v("yum install libmcrypt-devel -y")])]),a._v(" "),s("p",[a._v("==./configure 作用： 软件配置与检查==")]),a._v(" "),s("ul",[s("li",[a._v("定义需要的功能选项")]),a._v(" "),s("li",[a._v("检测系统环境是否符合安装要求")]),a._v(" "),s("li",[a._v("把定义好的功能选项和检测系统环境的信息都写入Makefile文件，用于后续的编辑")])]),a._v(" "),s("p",[a._v("配置安装变量时提示：")]),a._v(" "),s("p",[a._v("​\tNo package libmcrypt available.")]),a._v(" "),s("p",[a._v("​\tNo package libmcrypt-devel available.")]),a._v(" "),s("p",[a._v("之前安装依赖时候，安装过这个两个包，但是yum源中没有这两个包，更新yum源")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" upgrade\n\nyum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" epel-release  //扩展包更新包\n\nyum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" libmcrypt libmcrypt-devel  // 重新安装这两个包\n\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages/Linux/Linux%E4%B8%8B%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%8301.jpeg",alt:"Linux下搭建LNMP环境"}})]),a._v(" "),s("p",[a._v("安装成功。")]),a._v(" "),s("p",[a._v("重新执行 ./configure")]),a._v(" "),s("p",[a._v("出现 "),s("strong",[a._v("Thank you for using PHP")]),a._v(".")]),a._v(" "),s("p",[a._v("###4.进行make操作")]),a._v(" "),s("p",[a._v("编译会花费一些时间，耐心等待即可。编译完成的最后会提示你执行make test命令。就是对上一步 make 的检查，要确保 make 是没有错误的，也就是这一步的 test、check要全部是 OK 的，error 为0。")]),a._v(" "),s("p",[a._v("###5.安装")]),a._v(" "),s("p",[a._v("make install")]),a._v(" "),s("p",[a._v("###6.配置PHP")]),a._v(" "),s("p",[a._v("将PHP源码包中的"),s("code",[a._v("php.ini-development")]),a._v("文件复制到"),s("code",[a._v("/usr/local/php/")]),a._v("下，更名为"),s("code",[a._v("php.ini")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /usr/local/src/php-7.0.22/php.ini-development /usr/local/php/php.ini\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /usr/local/php/etc/php-fpm.d/www.conf.default /usr/local/php/etc/php-fpm.d/www.conf\n")])])]),s("p",[a._v("配置php.ini   "),s("code",[a._v("cgi.fix_pathinfo=0")])]),a._v(" "),s("p",[a._v("####启动php-fpm服务：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("/usr/local/php/sbin/php-fpm\n")])])]),s("p",[s("strong",[a._v("设置php-fpm开机自启")])]),a._v(" "),s("ol",[s("li",[s("p",[a._v("创建脚本文件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("vi  /etc/init.d/php-fpm\n")])])])]),a._v(" "),s("li",[s("p",[a._v("写入脚本并保存退出")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/sh")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# php-fpm - this script starts and stops the php-fpm daemin")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# chkconfig: - 85 15")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# processname: php-fpm")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# config:      /usr/local/php/etc/php-fpm.conf")]),a._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n       "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DESC")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"php-fpm daemon"')]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NAME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("php-fpm\n       "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DAEMON")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/php/sbin/"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NAME")]),a._v("     \n       "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CONFIGFILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/php/etc/php-fpm.conf   \n       "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PIDFILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/php/var/run/"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NAME")]),a._v(".pid   \n       "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SCRIPTNAME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/etc/init.d/"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NAME")]),a._v("  \n       \n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# If the daemon file is not found, terminate the script.")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DAEMON")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("d_start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DAEMON")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$CONFIGFILE")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('" already running"')]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("d_stop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-QUIT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" $PIDFILE"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('" no running"')]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("d_reload")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-HUP")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" $PIDFILE"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('" could not reload"')]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("case")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("\n           start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Starting '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DESC")]),a._v(": "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NAME")]),a._v('"')]),a._v("\n               d_start\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"."')]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n           stop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Stopping '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DESC")]),a._v(": "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NAME")]),a._v('"')]),a._v("\n               d_stop\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"."')]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n           reload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Reloading '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DESC")]),a._v(' configuration..."')]),a._v("\n               d_reload\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Reloaded."')]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n           restart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Restarting '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DESC")]),a._v(": "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NAME")]),a._v('"')]),a._v("\n               d_stop\n               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Sleep for two seconds before starting again, this should give the nginx daemon some time to perform a graceful stop")]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n               d_start\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"."')]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n           *"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Usage: '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SCRIPTNAME")]),a._v(' {start|stop|restart|force-reload)"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&2")]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("esac")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("修改权限")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" a+x php-fpm\n")])])])]),a._v(" "),s("li",[s("p",[a._v("测试并设置开机自启")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ /etc/init.d/php-fpm "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v("\n\n   Usage: /etc/init.d/php-fpm "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("start"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("stop"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("force-reload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" php-fpm on    \n")])])])])]),a._v(" "),s("h2",{attrs:{id:"二、安装nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、安装nginx"}},[a._v("#")]),a._v(" 二、安装Nginx")]),a._v(" "),s("h3",{attrs:{id:"_1-官网上下载nginx-并安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-官网上下载nginx-并安装依赖"}},[a._v("#")]),a._v(" 1.官网上下载Nginx，并安装依赖")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" gcc pcre-devel zlib-devel openssl openssl-devel \n")])])]),s("h3",{attrs:{id:"_2-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装"}},[a._v("#")]),a._v(" 2.安装")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 解压")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" nginx-1.9.9.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##进入nginx目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" nginx-1.9.9\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 配置")]),a._v("\n./configure "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--prefix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/nginx\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# make")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd到刚才配置的安装目录/usr/loca/nginx/")]),a._v("\n./sbin/nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v("\n\n提示成功\nnginx: the configuration "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" /usr/local/nginx/conf/nginx.conf syntax is ok\nnginx: configuration "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" /usr/local/nginx/conf/nginx.conf "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" is successful\n")])])]),s("h3",{attrs:{id:"_3-访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-访问"}},[a._v("#")]),a._v(" 3.访问")]),a._v(" "),s("p",[a._v("浏览器中访问ip，网页没有任何显示，是防火墙，80端口没开，开启80端口")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("/sbin/iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n/etc/rc.d/init.d/iptables save\n/etc/init.d/iptables restart\n")])])]),s("p",[a._v("再访问就正常了。")]),a._v(" "),s("h3",{attrs:{id:"_4-配置nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置nginx"}},[a._v("#")]),a._v(" 4.配置Nginx")]),a._v(" "),s("p",[a._v("编辑nginx配置文件/usr/local/nginx/conf/nginx.conf，主要修改nginx的server {}配置块中的内容，修改location块，追加index.php让nginx服务器默认支持index.php为首页：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages/Linux/Linux%E4%B8%8B%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%8303.png",alt:""}})]),a._v(" "),s("p",[a._v("打开php配置模块：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages/Linux/Linux%E4%B8%8B%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%8304.png",alt:""}})]),a._v(" "),s("p",[a._v("这里面很多都是默认的，"),s("code",[a._v("root")]),a._v("是配置php程序放置的根目录，主要修改的就是"),s("code",[a._v("fastcgi_param")]),a._v("中的"),s("code",[a._v("/scripts")]),a._v("为"),s("code",[a._v("$document_root")])]),a._v(" "),s("p",[a._v("修改完这些保存并退出，然后重启nginx:")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("/usr/local/nginx/sbin/nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" reload\n")])])]),s("h3",{attrs:{id:"_5-测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-测试"}},[a._v("#")]),a._v(" 5.测试")]),a._v(" "),s("p",[a._v("创建index.php：")]),a._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?php")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("phpinfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("?>")])]),a._v("\n")])])]),s("p",[a._v("访问：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages/Linux/Linux%E4%B8%8B%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%8305.png",alt:""}})]),a._v(" "),s("h3",{attrs:{id:"_6-配置nginx全局变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-配置nginx全局变量"}},[a._v("#")]),a._v(" 6.配置Nginx全局变量")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在linux系统的/etc/init.d/目录下创建nginx文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/init.d/nginx\n")])])]),s("p",[a._v("在文件中添加如下脚本，自定义安装的话：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("nginx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("”/usr/sbin/nginx”                         "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#修改成nginx执行程序的路径。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NGINX_CONF_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("”/etc/nginx/nginx.conf”         "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#修改成配置文件的路径。")]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/sh")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# nginx - this script starts and stops the nginx daemon")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# chkconfig:   - 85 15")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# description:  Nginx is an HTTP(S) server, HTTP(S) reverse \\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#               proxy and IMAP/POP3 proxy server")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Source function library.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" /etc/rc.d/init.d/functions\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Source networking configuration.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" /etc/sysconfig/network\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Check that networking is up.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NETWORKING")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"no"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("nginx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/local/nginx/sbin/nginx"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("prog")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("basename")]),a._v(" $nginx"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NGINX_CONF_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/local/nginx/conf/nginx.conf"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" /etc/sysconfig/nginx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" /etc/sysconfig/nginx\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("lockfile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/lock/subsys/nginx\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("make_dirs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# make required directories")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("user")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-V")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"configure arguments:"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/[^*]*--user=\\([^ ]*\\).*/\\1/g'")]),a._v(" -"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("options")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("$nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-V")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'configure arguments:'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[a._v("opt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" $opt "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.*-temp-path'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" $opt "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"="')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$value")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# echo "creating" $value')]),a._v("\n               "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$value")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chown")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$user")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$value")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$nginx")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NGINX_CONF_FILE")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v("\n    make_dirs\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Starting '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$prog")]),a._v(': "')]),a._v("\n    daemon "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$nginx")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NGINX_CONF_FILE")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("retval")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$retval")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-eq")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$lockfile")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$retval")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("stop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Stopping '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$prog")]),a._v(': "')]),a._v("\n    killproc "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$prog")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-QUIT")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("retval")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$retval")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-eq")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$lockfile")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$retval")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    configtest "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v("\n    stop\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n    start\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("reload")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    configtest "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Reloading '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$prog")]),a._v(': "')]),a._v("\n    killproc "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$nginx")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-HUP")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RETVAL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("force_reload")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    restart\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("configtest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$nginx")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$NGINX_CONF_FILE")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("rh_status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    status "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$prog")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("rh_status_q")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    rh_status "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/dev/null "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("case")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("\n    start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        rh_status_q "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    stop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        rh_status_q "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("configtest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    reload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        rh_status_q "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    force-reload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        force_reload\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        rh_status\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    condrestart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("try-restart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        rh_status_q "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    *"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Usage: '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$0")]),a._v(' {start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest}"')]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("esac")]),a._v("\n")])])]),s("p",[a._v("保存脚本文件后设置文件的执行权限:")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" a+x /etc/init.d/nginx   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# a+x参数表示 ==> all user can execute  所有用户可执行")]),a._v("\n")])])]),s("p",[a._v("然后就可以通过这个脚本对nginx进行管理了")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("/etc/init.d/nginx —status-all\n\nUsage: /etc/init.d/nginx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("start"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("stop"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("status"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("condrestart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("try-restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("reload"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("force-reload"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("configtest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[s("strong",[a._v("使用chkconfig管理列表：")])]),a._v(" "),s("ol",[s("li",[s("p",[a._v("先将nginx服务加入chkconfig管理列表：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--add")]),a._v(" /etc/init.d/nginx\n")])])])]),a._v(" "),s("li",[s("p",[a._v("加完这个之后，就可以使用service对nginx进行启动，重启等操作")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("\n")])])]),s("p",[a._v("$ service nginx --status-all\nUsage: /etc/init.d/nginx {start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest}")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("设置终端模式开机启动")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v(" $ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" nginx on\n")])])])]),a._v(" "),s("li",[s("p",[a._v("查看")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("   "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--list")]),a._v("      \n")])])])])]),a._v(" "),s("h2",{attrs:{id:"三、安装mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、安装mysql"}},[a._v("#")]),a._v(" 三、安装Mysql")]),a._v(" "),s("h3",{attrs:{id:"_1-安装必要依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装必要依赖"}},[a._v("#")]),a._v(" 1.安装必要依赖")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("yum –y "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" gcc gcc-c++ gcc-lib ncurses-devel cmake\n")])])]),s("h3",{attrs:{id:"_2-官网上下载mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-官网上下载mysql"}},[a._v("#")]),a._v(" 2.官网上下载mysql")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" mysql-5.6.37.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" mysql-5.6.37\n")])])]),s("h3",{attrs:{id:"_3、编译"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、编译"}},[a._v("#")]),a._v(" 3、编译")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 1")]),a._v("\ncmake "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DCMAKE_INSTALL_PREFIX")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DMYSQL_DATADIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/mysql/data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DSYSCONFDIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DWITH_MYISAM_STORAGE_ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DWITH_INNOBASE_STORAGE_ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DWITH_MEMORY_STORAGE_ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DWITH_READLINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DMYSQL_UNIX_ADDR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/lib/mysql/mysql.sock "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DMYSQL_TCP_PORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DENABLED_LOCAL_INFILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DWITH_PARTITION_STORAGE_ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DEXTRA_CHARSETS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("all "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DDEFAULT_CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("utf8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DDEFAULT_COLLATION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("utf8_general_ci\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("####################################################")]),a._v("\nCMake Warning:\n  Manually-specified variables were not used by the project:\n    WITH_MEMORY_STORAGE_ENGINE\n    WITH_READLINE\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################################")]),a._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#2################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" –j "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#3################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),s("h3",{attrs:{id:"_4-修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-修改配置文件"}},[a._v("#")]),a._v(" 4.修改配置文件")]),a._v(" "),s("p",[s("code",[a._v("my.cnf")]),a._v("配置文件放置"),s("code",[a._v("/usr/local/myslql")]),a._v("目录下，配置文件如下，根据具体情况修改:")]),a._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("[mysqld]\nuser = mysql\nport = 3306\nsocket = /var/lib/mysql/mysql.sock\nbasedir = /usr/local/mysql\ndatadir = /usr/local/mysql/data\n\n#default-character-set=utf8\n#skip-name-resolve\n\nlower_case_table_names=1\nback_log = 600   \nmax_connections = 3000   \nmax_connect_errors = 1000\n\ntable_open_cache = 4096  \nmax_allowed_packet = 32M  \nsort_buffer_size = 16M  \njoin_buffer_size = 16M   \nthread_cache_size = 512\nthread_concurrency = 16\nquery_cache_size = 128M\nquery_cache_limit = 4M    \nquery_cache_min_res_unit = 2k    \ndefault-storage-engine = InnoDB\nthread_stack = 512K\ntmp_table_size = 256M   \nmax_heap_table_size = 256M\n\nlong_query_time = 6\nslow-query-log=1\nslow-query-log-file=/usr/local/mysql/logs/slow.log\n#log-queries-not-using-indexes\n\nlog-bin=/usr/local/mysql/data/mysql-bin\nbinlog_cache_size = 4M\nmax_binlog_cache_size = 512M\nmax_binlog_size = 512M\nbinlog-ignore-db=mysql\nlog-slave-updates\nreplicate-ignore-db=mysql\nbinlog_format=ROW\n\ninnodb_additional_mem_pool_size = 64M   \ninnodb_buffer_pool_size = 512M   \ninnodb_data_file_path = ibdata1:32M:autoextend   \ninnodb_file_io_threads = 4   \ninnodb_thread_concurrency = 8   \ninnodb_flush_log_at_trx_commit = 2   \ninnodb_log_buffer_size = 16M  \ninnodb_log_file_size = 128M   \ninnodb_log_files_in_group = 3   \ninnodb_max_dirty_pages_pct = 90   \ninnodb_lock_wait_timeout = 120   \n\n[mysqldump]\nquick\nmax_allowed_packet = 32M\n\n[mysqld_safe]\nlog-error=/usr/local/mysql/logs/mysql.err\npid-file=/usr/local/mysql/data/mysqld.pid\nopen_files_limit = 20480\n")])])]),s("p",[a._v("切换到已经安装的目录，创建配置文件中的"),s("code",[a._v("logs")]),a._v("文件夹")]),a._v(" "),s("h3",{attrs:{id:"_5-创建用户-修改所属关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-创建用户-修改所属关系"}},[a._v("#")]),a._v(" 5.创建用户，修改所属关系")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("groupadd")]),a._v(" mysql\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" mysql mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /bin/false\n")])])]),s("h3",{attrs:{id:"_6-初始化mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-初始化mysql"}},[a._v("#")]),a._v(" 6.初始化mysql")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/loca/mysql/scripts\n\n./mysql_install_db "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--datadir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/mysql/data "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--user")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--basedir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/mysql\n")])])]),s("h3",{attrs:{id:"_7-规划启动脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-规划启动脚本"}},[a._v("#")]),a._v(" 7.规划启动脚本")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置开机自启")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" mysqld on  \n")])])]),s("p",[a._v("输入mysqld提示command not found 把mysql配置到环境变量 创建mysql.sh并添加")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#1、 创建mysql.sh文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/profile.d/mysql.sh \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#2、添加 保存")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v(":/usr/local/mysql/bin\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#3、执行")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile.d/mysql.sh\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#4、测试 查看配置的环境变量是否有效")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" mysqld —help\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" mysqld --status-all\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages/Linux/Linux%E4%B8%8B%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%8306.png",alt:""}})]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("./support-files/mysql.server start\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 报错了")]),a._v("\nStarting MySQL.170802 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("23")]),a._v(":25:04 mysqld_safe error: log-error "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" to "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/usr/local/mysql/logs/mysql.err'")]),a._v(", however "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" don"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'t exists. Create writable for user '")]),a._v("mysql'.\nThe server quit without updating PID "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("/usr/local/mysql/data/192.168.11.201.pid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(".\n\n解决：\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /usr/local/mysql/logs/mysql.err\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chown")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v(" mysql:mysql /usr/local/mysql/logs/mysql.err\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" mysql restart\n")])])]),s("h3",{attrs:{id:"_8-启动服务-构建数据库账户信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-启动服务-构建数据库账户信息"}},[a._v("#")]),a._v(" 8.启动服务，构建数据库账户信息")]),a._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("grant all on *.* to 'root'@'192.168.%.%' identified by 'root';\ncreate database DATABASE_NAME;\n")])])]),s("p",[a._v("删除行:"),s("code",[a._v("delete from DB_name.tb_name where *=x ;")])])])}),[],!1,null,null,null);s.default=e.exports}}]);
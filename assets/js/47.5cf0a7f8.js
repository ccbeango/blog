(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{363:function(s,a,t){"use strict";t.r(a);var e=t(1),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"小视频笔记-二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小视频笔记-二"}},[s._v("#")]),s._v(" 小视频笔记（二）")]),s._v(" "),a("h1",{attrs:{id:"_5-文本编辑器vim"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-文本编辑器vim"}},[s._v("#")]),s._v(" 5.文本编辑器Vim")]),s._v(" "),a("h2",{attrs:{id:"_5-1-vim简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-vim简介"}},[s._v("#")]),s._v(" 5.1 Vim简介")]),s._v(" "),a("p",[s._v("Vim是一个功能强大的全屏幕文本编辑器，是Linux/UNIX上最常用的文本编辑器，它的作用是建立、编辑、显示文本文件。")]),s._v(" "),a("p",[a("strong",[s._v("Vim 没有菜单，只有命令。")])]),s._v(" "),a("h2",{attrs:{id:"_5-2-vim工作模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-vim工作模式"}},[s._v("#")]),s._v(" 5.2 Vim工作模式")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages/Linux/linux%E5%B0%8F%E8%A7%86%E9%A2%9102.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"_5-3-常用操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-常用操作"}},[s._v("#")]),s._v(" 5.3 常用操作")]),s._v(" "),a("h3",{attrs:{id:"_5-3-1-插入命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-1-插入命令"}},[s._v("#")]),s._v(" 5.3.1 插入命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("a")]),s._v(" "),a("td",[s._v("在光标所在字符后插入")])]),s._v(" "),a("tr",[a("td",[s._v("A")]),s._v(" "),a("td",[s._v("在光标所在行尾插入")])]),s._v(" "),a("tr",[a("td",[s._v("i")]),s._v(" "),a("td",[s._v("在光标所在字符前插入")])]),s._v(" "),a("tr",[a("td",[s._v("I")]),s._v(" "),a("td",[s._v("在光标所在行行首插入")])]),s._v(" "),a("tr",[a("td",[s._v("o")]),s._v(" "),a("td",[s._v("在光标下插入新航")])]),s._v(" "),a("tr",[a("td",[s._v("O")]),s._v(" "),a("td",[s._v("在光标上插入新航")])])])]),s._v(" "),a("h3",{attrs:{id:"_5-3-2-定位命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-2-定位命令"}},[s._v("#")]),s._v(" 5.3.2 定位命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v(": set nu")]),s._v(" "),a("td",[s._v("设置行号")])]),s._v(" "),a("tr",[a("td",[s._v(": set nonu")]),s._v(" "),a("td",[s._v("取消行号")])]),s._v(" "),a("tr",[a("td",[s._v("gg/G")]),s._v(" "),a("td",[s._v("到第一行/到最后一行")])]),s._v(" "),a("tr",[a("td",[s._v("nG")]),s._v(" "),a("td",[s._v("到第n行")])]),s._v(" "),a("tr",[a("td",[s._v(": nG")]),s._v(" "),a("td",[s._v("到第n行")])]),s._v(" "),a("tr",[a("td",[s._v("$")]),s._v(" "),a("td",[s._v("移至行尾")])]),s._v(" "),a("tr",[a("td",[s._v("0")]),s._v(" "),a("td",[s._v("移至行首")])])])]),s._v(" "),a("h3",{attrs:{id:"_5-3-3-删除命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-3-删除命令"}},[s._v("#")]),s._v(" 5.3.3 删除命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("x")]),s._v(" "),a("td",[s._v("删除光标所在处字符")])]),s._v(" "),a("tr",[a("td",[s._v("nx")]),s._v(" "),a("td",[s._v("删除光标所在处后n个字符")])]),s._v(" "),a("tr",[a("td",[s._v("dd")]),s._v(" "),a("td",[s._v("删除光标所在行，ndd删除n行")])]),s._v(" "),a("tr",[a("td",[s._v("dG")]),s._v(" "),a("td",[s._v("删除光标所在行到文件末尾内容")])]),s._v(" "),a("tr",[a("td",[s._v("D")]),s._v(" "),a("td",[s._v("删除光标所在处到行尾内容")])]),s._v(" "),a("tr",[a("td",[s._v(":n1,n2d")]),s._v(" "),a("td",[s._v("删除指定范围的行")])])])]),s._v(" "),a("h3",{attrs:{id:"_5-3-4-复制和剪切命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-4-复制和剪切命令"}},[s._v("#")]),s._v(" 5.3.4 复制和剪切命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("yy")]),s._v(" "),a("td",[s._v("复制当前行")])]),s._v(" "),a("tr",[a("td",[s._v("nyy")]),s._v(" "),a("td",[s._v("复制当前行以下n行")])]),s._v(" "),a("tr",[a("td",[s._v("dd")]),s._v(" "),a("td",[s._v("剪切当前行")])]),s._v(" "),a("tr",[a("td",[s._v("ndd")]),s._v(" "),a("td",[s._v("剪切当前行以下n行")])]),s._v(" "),a("tr",[a("td",[s._v("p、P")]),s._v(" "),a("td",[s._v("粘贴在当前光标所在行下或行上")])])])]),s._v(" "),a("h3",{attrs:{id:"_5-3-5-替换和取消命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-5-替换和取消命令"}},[s._v("#")]),s._v(" 5.3.5 替换和取消命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("r")]),s._v(" "),a("td",[s._v("取代光标所在处字符")])]),s._v(" "),a("tr",[a("td",[s._v("R")]),s._v(" "),a("td",[s._v("从光标所在处开始替换字符，按Esc结束")])]),s._v(" "),a("tr",[a("td",[s._v("u")]),s._v(" "),a("td",[s._v("取消上一步操作")])])])]),s._v(" "),a("h3",{attrs:{id:"_5-3-6-搜索和搜索替换命"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-6-搜索和搜索替换命"}},[s._v("#")]),s._v(" 5.3.6 搜索和搜索替换命")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("/string")]),s._v(" "),a("td",[s._v("搜索指定字符串；搜索时忽略大小写"),a("code",[s._v(":set ic")])])]),s._v(" "),a("tr",[a("td",[s._v("n")]),s._v(" "),a("td",[s._v("搜索指定字符串的下一个出现位置")])]),s._v(" "),a("tr",[a("td",[s._v(":%s/old/new/g")]),s._v(" "),a("td",[s._v("全文替换指定字符串")])]),s._v(" "),a("tr",[a("td",[s._v(":n1,n2s/old/new/g")]),s._v(" "),a("td",[s._v("在一定范围内替换指定字符串")])])])]),s._v(" "),a("h3",{attrs:{id:"_5-3-7-存和退出命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-7-存和退出命令"}},[s._v("#")]),s._v(" 5.3.7 存和退出命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v(":w")]),s._v(" "),a("td",[s._v("保存修改")])]),s._v(" "),a("tr",[a("td",[s._v(":w new_filename")]),s._v(" "),a("td",[s._v("另存为指定文件")])]),s._v(" "),a("tr",[a("td",[s._v(":wq")]),s._v(" "),a("td",[s._v("保存修改并退出")])]),s._v(" "),a("tr",[a("td",[s._v("ZZ")]),s._v(" "),a("td",[s._v("快捷键，保存修改并退出")])]),s._v(" "),a("tr",[a("td",[s._v(":q!")]),s._v(" "),a("td",[s._v("不保存修改退出")])]),s._v(" "),a("tr",[a("td",[s._v(":wq!")]),s._v(" "),a("td",[s._v("保存修改并退出（文件所有者及root可使用）")])])])]),s._v(" "),a("h2",{attrs:{id:"_5-4-使用技巧"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-使用技巧"}},[s._v("#")]),s._v(" 5.4 使用技巧")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/ccbeango/blogImages/Linux/linux%E5%B0%8F%E8%A7%86%E9%A2%9103.png",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("注：")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v(":r 文件路径")]),s._v(" 可以直接把文件导入光标所在的文件")]),s._v(" "),a("li",[s._v("设置好的快捷键在重启之后会失效，可以在宿主目录下创建vim的配置文件，用户的家目录下，文件名字叫做"),a("code",[s._v(".vimrc")])]),s._v(" "),a("li",[s._v("普通用户在"),a("code",[s._v("/home/username/.vimrc")]),s._v("；Root用户在 "),a("code",[s._v("/root/.vimrc")])])]),s._v(" "),a("h1",{attrs:{id:"_6-软件包管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-软件包管理"}},[s._v("#")]),s._v(" 6 软件包管理")]),s._v(" "),a("h2",{attrs:{id:"_6-1-软件包管理简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-软件包管理简介"}},[s._v("#")]),s._v(" 6.1 软件包管理简介")]),s._v(" "),a("h3",{attrs:{id:"_6-1-1-软件包分类和各自优缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-1-软件包分类和各自优缺点"}},[s._v("#")]),s._v(" 6.1.1 软件包分类和各自优缺点")]),s._v(" "),a("p",[s._v("分类：")]),s._v(" "),a("ul",[a("li",[s._v("源码包")]),s._v(" "),a("li",[s._v("二进制包（RPM包、系统默认包）")])]),s._v(" "),a("p",[a("strong",[s._v("源码包")])]),s._v(" "),a("p",[s._v("优点：")]),s._v(" "),a("ul",[a("li",[s._v("开源，如果有足够的能力，可以修改源代码")]),s._v(" "),a("li",[s._v("可以自由选择所需的功")]),s._v(" "),a("li",[s._v("能软件是编译安装，所以更加适合自己的系统，更加稳定也效率更高卸载方便")]),s._v(" "),a("li",[s._v("卸载方便")])]),s._v(" "),a("p",[s._v("缺点：")]),s._v(" "),a("ul",[a("li",[s._v("安装过程步骤较多，尤其安装较大的软件集合时(如LAMP环境搭建)，容易出现拼写错误")]),s._v(" "),a("li",[s._v("编译过程时间较长，安装比二进制安装时间长")]),s._v(" "),a("li",[s._v("因为是编译安装，安装过程中一旦报错新手很难解决")])]),s._v(" "),a("p",[a("strong",[s._v("RPM包（二进制包）")])]),s._v(" "),a("p",[s._v("优点：")]),s._v(" "),a("ul",[a("li",[s._v("包管理系统简单，只通过几个命令就可以实现包的安装、升级、查询和卸载")]),s._v(" "),a("li",[s._v("安装速度比源码包安装快的多")])]),s._v(" "),a("p",[s._v("缺点：")]),s._v(" "),a("ul",[a("li",[s._v("经过编译，不再可以看到源代码")]),s._v(" "),a("li",[s._v("功能选择不如源码包灵活")]),s._v(" "),a("li",[s._v("依赖性")])]),s._v(" "),a("h2",{attrs:{id:"_6-2-rpm包管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-rpm包管理"}},[s._v("#")]),s._v(" 6.2 RPM包管理")]),s._v(" "),a("h3",{attrs:{id:"_6-2-1-rpm命令管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-1-rpm命令管理"}},[s._v("#")]),s._v(" 6.2.1 RPM命令管理")]),s._v(" "),a("p",[s._v("RPM包命名原则："),a("code",[s._v("httpd-2.2.15-15.el6.centos.1.i686.rpm")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("字段")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("httpd")]),s._v(" "),a("td",[s._v("软件包名")])]),s._v(" "),a("tr",[a("td",[s._v("2.2.15")]),s._v(" "),a("td",[s._v("软件版本")])]),s._v(" "),a("tr",[a("td",[s._v("15")]),s._v(" "),a("td",[s._v("软件发布的次数")])]),s._v(" "),a("tr",[a("td",[s._v("el6.centos")]),s._v(" "),a("td",[s._v("适合的Linux平台")])]),s._v(" "),a("tr",[a("td",[s._v("i686")]),s._v(" "),a("td",[s._v("适合的硬件平台；"),a("code",[s._v("noarch")]),s._v("或者没有写，表示适合所有的硬件平台")])]),s._v(" "),a("tr",[a("td",[s._v("rpm")]),s._v(" "),a("td",[s._v("rpm包扩展名")])])])]),s._v(" "),a("h3",{attrs:{id:"_6-2-2-rpm包依赖性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-2-rpm包依赖性"}},[s._v("#")]),s._v(" 6.2.2 RPM包依赖性")]),s._v(" "),a("p",[s._v("包依赖性分为三种：")]),s._v(" "),a("ol",[a("li",[s._v("树形依赖： "),a("code",[s._v("a->b->c")]),s._v("； 安装顺序是cba，卸载顺序是abc")]),s._v(" "),a("li",[s._v("环形依赖："),a("code",[s._v("a->b->c->a")]),s._v(" ；这种依赖关系的解决办法是abc一条命令同时安装")]),s._v(" "),a("li",[s._v("模块依赖： "),a("a",{attrs:{href:"http://www.rpmfind.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("模块依赖查询网站"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("==这种方案可以安装包，但是依赖问题很难解决，更好的方案是使用yum安装==")]),s._v(" "),a("h3",{attrs:{id:"_6-2-3-安装升级和卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-3-安装升级和卸载"}},[s._v("#")]),s._v(" 6.2.3 安装升级和卸载")]),s._v(" "),a("h3",{attrs:{id:"_6-2-4-rpm包查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-4-rpm包查询"}},[s._v("#")]),s._v(" 6.2.4 RPM包查询")]),s._v(" "),a("h3",{attrs:{id:"_6-2-5-检验与文件提取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-5-检验与文件提取"}},[s._v("#")]),s._v(" 6.2.5 检验与文件提取")]),s._v(" "),a("h2",{attrs:{id:"_6-3-yum在线管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-yum在线管理"}},[s._v("#")]),s._v(" 6.3 yum在线管理")]),s._v(" "),a("h3",{attrs:{id:"_6-3-1-网络yum源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-1-网络yum源"}},[s._v("#")]),s._v(" 6.3.1 网络yum源")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/yum.repos.d/CentOS-Base.repo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CentOS-Base.repo")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The mirror system uses the connecting IP address of the client and the")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# update status of each mirror to pick mirrors that are updated to and")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# geographically close to the client.  You should use this for CentOS updates")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# unless you are manually picking other mirrors.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# If the mirrorlist= does not work for you, as a fall back you can try the ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# remarked out baseurl= line instead.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CentOS-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v(" - Base\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mirrorlist")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://mirrorlist.centos.org/?release"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("arch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("repo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("os"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("infra")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$infra")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#released updates ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("updates"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CentOS-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v(" - Updates\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mirrorlist")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://mirrorlist.centos.org/?release"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("arch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("repo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("updates"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("infra")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$infra")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#baseurl=http://mirror.centos.org/centos/$releasever/updates/$basearch/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#additional packages that may be useful")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("extras"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CentOS-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v(" - Extras\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mirrorlist")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://mirrorlist.centos.org/?release"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("arch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("repo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("extras"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("infra")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$infra")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#baseurl=http://mirror.centos.org/centos/$releasever/extras/$basearch/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#additional packages that extend functionality of existing packages")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("centosplus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CentOS-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v(" - Plus\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mirrorlist")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://mirrorlist.centos.org/?release"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("arch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("repo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("centosplus"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("infra")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$infra")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#baseurl=http://mirror.centos.org/centos/$releasever/centosplus/$basearch/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n")])])]),a("p",[s._v("这些容器，默认会使用base 这些默认就是配好的")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("字段")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("[base]")]),s._v(" "),a("td",[s._v("容器名称，一定要放在[]中")])]),s._v(" "),a("tr",[a("td",[s._v("name")]),s._v(" "),a("td",[s._v("容器说明，可以自己随便写点什么")])]),s._v(" "),a("tr",[a("td",[s._v("mirrorlist")]),s._v(" "),a("td",[s._v("镜像站点，可以注释掉")])]),s._v(" "),a("tr",[a("td",[s._v("baseurl")]),s._v(" "),a("td",[s._v("我们的yum源服务器的地址。默认是CentOS官方的yum源服务器，是可以使用的，如果你觉得慢可以改成你喜欢的yum源地址")])]),s._v(" "),a("tr",[a("td",[s._v("enabled")]),s._v(" "),a("td",[s._v("此容器是否生效，如果不写或写成enable=1都是生效，写成enable=0就是不生效")])]),s._v(" "),a("tr",[a("td",[s._v("gpgcheck")]),s._v(" "),a("td",[s._v("如果是1是指RPM的数字证书生效，如果是0则不生效")])]),s._v(" "),a("tr",[a("td",[s._v("gpgkey")]),s._v(" "),a("td",[s._v("数字证书的公钥文件保存位置。不用修改")])])])]),s._v(" "),a("h3",{attrs:{id:"_6-3-2-常用yum命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-2-常用yum命令"}},[s._v("#")]),s._v(" 6.3.2 常用yum命令")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("查询")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查询所有可用软件包列表")]),s._v("\n$ yum list \napr-devel.x86_64                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(".8-3.el7_4.1                @updates\napr-util.x86_64   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("软件包"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v(".2-6.el7 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("版本号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("            @base "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("容器"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   \napr-util-devel.x86_64                    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v(".2-6.el7                    @base   \naudit.x86_64                             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.7")]),s._v(".6-3.el7                    @base   \naudit-libs.i686                          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.7")]),s._v(".6-3.el7                    @base   \naudit-libs.x86_64                        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.7")]),s._v(".6-3.el7                    @base \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#搜索服务器上所有和关键字相关的包")]),s._v("\n$ yum search 关键字\n")])])])]),s._v(" "),a("li",[a("p",[s._v("安装")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# install 安装 -y 自动回答yes")]),s._v("\n$ yum –y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" 包名\n")])])])]),s._v(" "),a("li",[a("p",[s._v("升级")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ yum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" update 包名\n")])])]),a("p",[s._v("yum –y update 如果不加包名，就是升级linux中所有的软件包，包括linux内核等都会升级，小心。如果升级，后面请跟包名。")])]),s._v(" "),a("li",[a("p",[s._v("卸载")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ yum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" remove 包名\n")])])]),a("p",[s._v("卸载也要慎用，卸载包a会把所有的依赖包都卸载，当然这些依赖包也可能被其他包使用，或被系统使用，这样在卸载a之后可能会出现很多问题。用什么装什么，尽量不卸载")])])]),s._v(" "),a("h3",{attrs:{id:"_6-3-3-yum软件组管理命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-3-yum软件组管理命令"}},[s._v("#")]),s._v(" 6.3.3 yum软件组管理命令")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有可用的软件组列表")]),s._v("\n$ yum grouplist\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装指定软件组，组名可以由grouplist查询出来")]),s._v("\n$ yum grouopinstall 软件组名\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 卸载指定软件组")]),s._v("\n$ yum groupremove 软件组名\n")])])]),a("p",[s._v("注： 软件组名要用双引号引起来")]),s._v(" "),a("h3",{attrs:{id:"_6-3-4-光盘yum源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-4-光盘yum源"}},[s._v("#")]),s._v(" 6.3.4 光盘yum源")]),s._v(" "),a("p",[s._v("搭建步骤：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("挂载光盘")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/cdrom /mnt/cdrom/\n")])])])]),s._v(" "),a("li",[a("p",[s._v("让网络yum源失效")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/yum.repos.d/\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" CentOS-Base.repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" CentOS-Base.repo.bak\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" CentOS-Debuginfo.repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("CentOS-Debuginfo.repo.bak\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" CentOS-Vault.repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" CentOS-V ault.repo.bak\n")])])])]),s._v(" "),a("li",[a("p",[s._v("修改光盘yum源文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" CentOS-Media.repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("c6-media"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CentOS-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v(" - Media "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///mnt/cdrom "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#地址为你自己的光盘挂载地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# file:///media/cdrom/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# file:///media/cdrecorder/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释这两个不存在的地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#把enabled=0改为enabled=1，让这个yum源配置文件生效 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /// 第三个斜杠是根目录")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"_6-3-5-源码包和rpm包的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-5-源码包和rpm包的区别"}},[s._v("#")]),s._v(" 6.3.5 源码包和rpm包的区别")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("两者的区别在于安装之前概念上的区别（上面已讲）和安装之后安装位置不同：")]),s._v(" "),a("p",[a("strong",[s._v("RPM包安装位置：")])]),s._v(" "),a("p",[s._v("是安装在默认位置中，RPM包默认安装路径是：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("/etc/")]),s._v(" "),a("th",[s._v("配置文件安装目录")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("/usr/bin/")]),s._v(" "),a("td",[s._v("可执行的命令安装目录")])]),s._v(" "),a("tr",[a("td",[s._v("/usr/lib/")]),s._v(" "),a("td",[s._v("程序所使用的函数库保存位置")])]),s._v(" "),a("tr",[a("td",[s._v("/usr/share/doc/")]),s._v(" "),a("td",[s._v("基本的软件使用手册保存位置")])]),s._v(" "),a("tr",[a("td",[s._v("/usr/share/man/")]),s._v(" "),a("td",[s._v("帮助文件保存位置")])])])]),s._v(" "),a("p",[s._v("==所有的rpm包安装基本都遵守这个安装位置==")]),s._v(" "),a("p",[s._v("**源码包安装位置：**安装在指定位置当中，一般是"),a("code",[s._v("/usr/local/软件名/")])])]),s._v(" "),a("li",[a("p",[s._v("安装位置不同带来的影响")]),s._v(" "),a("p",[s._v("RPM包安装的服务可以使用系统服务管理命令(service)来管理，不需要再配置；源码包安装可以直接使用绝对路径来进行服务的管理，或者自己去配置service来管理。")])])]),s._v(" "),a("h1",{attrs:{id:"_7-用户和用户组管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-用户和用户组管理"}},[s._v("#")]),s._v(" 7 用户和用户组管理")]),s._v(" "),a("h2",{attrs:{id:"_7-1-用户配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-用户配置文件"}},[s._v("#")]),s._v(" 7.1 用户配置文件")]),s._v(" "),a("p",[s._v("越是对服务器安全性要求高的服务器，越需要建立合理的用户权限等级制度和服务器操作规范。")]),s._v(" "),a("p",[s._v("在Linux中主要是通过用户配置文件来查看和修改用户信息。")]),s._v(" "),a("h3",{attrs:{id:"_7-1-1-用户信息文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-1-用户信息文件"}},[s._v("#")]),s._v(" 7.1.1 用户信息文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nsync:x:5:0:sync:/sbin:/bin/sync\nshutdown:x:6:0:shutdown:/sbin:/sbin/shutdown\nhalt:x:7:0:halt:/sbin:/sbin/halt\nmail:x:8:12:mail:/var/spool/mail:/sbin/nologin\nredmine:x:1008:1008::/home/redmine:/bin/bash\nsaslauth:x:994:76:Saslauthd user:/run/saslauthd:/sbin/nologin\napache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin\npostgres:x:26:26:PostgreSQL Server:/var/lib/pgsql:/bin/bash\nlisong:x:1009:1010::/home/lisong:/bin/bash\nhuarong:x:1010:1011::/home/huarong:/bin/bash\n")])])]),a("p",[a("code",[s._v("/etc/passwd")]),s._v("字段含义：")]),s._v(" "),a("p",[s._v("这个文件中每一行代表一个用户，而且每个字段用：分割，总共7个字段")]),s._v(" "),a("ul",[a("li",[s._v("第1字段：用户名称")]),s._v(" "),a("li",[s._v("第2字段：密码标志早期的密码是直接放在这个文件中的，现在的密码放在了影子文件"),a("code",[s._v("/etc/shadow")]),s._v("，为什么这样做，是因为"),a("code",[s._v("passwd")]),s._v("文件的默认权限是"),a("strong",[s._v("644")]),s._v("，"),a("code",[s._v("shadow")]),s._v("文件的默认权限是"),a("strong",[s._v("000")]),s._v("，除了root用户，任何用户都不能读这个文件，增强系统的安全性； "),a("code",[s._v("x")]),s._v("表示需要密码登录，登录的时候回去"),a("code",[s._v("shadow")]),s._v("中找密码进行验证，没"),a("code",[s._v("x")]),s._v("就会认为没有密码，用户可以直接登录，这种登录只允许本机登录，远程是不允许的。")]),s._v(" "),a("li",[s._v("第3字段：UID(用户ID)\n"),a("ul",[a("li",[s._v("0\t                        超级用户")]),s._v(" "),a("li",[s._v("1-499                      系统用户（伪用户） 用户不能登录，不能删除，删除系统会崩溃")]),s._v(" "),a("li",[s._v("500-65535              普通用户")])])]),s._v(" "),a("li",[s._v("第4字段：GID（用户初始组ID） 每个用户创建时，就会创建出一个同名的初始组，初始组不可或缺，并且每个用户只能有一个初始组，初始组可以改，但只能是一个。初始组并不推荐更改")]),s._v(" "),a("li",[s._v("第5字段：用户说明")]),s._v(" "),a("li",[s._v("第6字段：家目录\n"),a("ul",[a("li",[s._v("普通用户："),a("code",[s._v("/home/用户名/")])]),s._v(" "),a("li",[s._v("超级用户："),a("code",[s._v("/root/")])])])]),s._v(" "),a("li",[s._v("第7字段：登录之后的Shell")])]),s._v(" "),a("p",[a("strong",[s._v("注：")])]),s._v(" "),a("p",[s._v("初始组和附加组：")]),s._v(" "),a("ol",[a("li",[s._v("初始组：\t就是指用户一登录就立刻拥有这个用户组的相关权限，每个用户的初始组只能有一个，一般就是和这个用户的用户名相同的组名作为这个用户的初始组。")]),s._v(" "),a("li",[s._v("附加组：指用户可以加入多个其他的用户组，并拥有这些组的权限，附加组可以有多个。")])]),s._v(" "),a("p",[s._v("Shell是什么：")]),s._v(" "),a("ol",[a("li",[s._v("Shell就是Linux的命令解释器。命令解释器：比如ls，会通过命令解释器解释传输给内核，内核再做出应答，显示在命令操作窗口。 用户想要和系统交流，都需要有这个命令解释器。")]),s._v(" "),a("li",[s._v("在"),a("code",[s._v("/etc/passwd")]),s._v("当中，除了标准Shell是"),a("code",[s._v("/bin/bash")]),s._v("之外，还可以写如"),a("code",[s._v("/sbin/nologin")]),s._v("，"),a("code",[s._v("/usr/bin/passwd")]),s._v("等。")])]),s._v(" "),a("h3",{attrs:{id:"_7-1-2-影子文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-2-影子文件"}},[s._v("#")]),s._v(" 7.1.2 影子文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" /etc/shadow\nroot:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$6")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$hoha7imwDef9ruvl")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$7f1TuPB4")]),s._v(".fWn7CkAHED3zbM1l3hG4UPEoTJjg2Mrz2dqjhxvCzhMX9RhXtb5y/JJTB32/7HXKcjslj0hLI6Xb1::0:99999:7:::\nbin:*:17110:0:99999:7:::\ndaemon:*:17110:0:99999:7:::\nadm:*:17110:0:99999:7:::\n\n")])])]),a("p",[a("code",[s._v("/etc/shadow")]),s._v("字段含义：")]),s._v(" "),a("ul",[a("li",[s._v("第1字段：用户名")]),s._v(" "),a("li",[s._v("第2字段：加密密码\n"),a("ul",[a("li",[s._v("加密算法为SHA512散列加密算法。加密的默认为数是512位")]),s._v(" "),a("li",[s._v("如果密码是“!!”或“*”代表没有密码，不能登录")])])]),s._v(" "),a("li",[s._v("第3字段：密码最后一次修改时间\n"),a("ul",[a("li",[s._v("使用1970年1月1日作为标准时间，每过一天时间戳加1")])])]),s._v(" "),a("li",[s._v("第4字段：两次密码的修改间隔时间（和第3字段相比）")]),s._v(" "),a("li",[s._v("第5字段:密码有效期(和第3字段相比)")]),s._v(" "),a("li",[s._v("第6字段:密码修改到期前的警告天数(和第5字段相比)")]),s._v(" "),a("li",[s._v("第7字段：密码过期后的宽限天数（和第5字段相比）\n"),a("ul",[a("li",[s._v(" 0:代表密码过期后立即失效")]),s._v(" "),a("li",[s._v(" -1:则代表密码永远不会失效。")])])]),s._v(" "),a("li",[s._v("第8字段:账号失效时间 要用时间戳表示")]),s._v(" "),a("li",[s._v("第9字段:保留")])]),s._v(" "),a("p",[a("strong",[s._v("时间戳换算：")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把时间戳换算为日期")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1970-01-01 16066 days"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把日期换算为时间戳")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$((")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("date "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("date"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v('"'),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("06")]),s._v('" '),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("86400")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("))")])]),s._v("\n\n")])])]),a("h3",{attrs:{id:"_7-1-3-组信息文件和组密码文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-3-组信息文件和组密码文件"}},[s._v("#")]),s._v(" 7.1.3 组信息文件和组密码文件")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("组信息文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" /etc/group\nroot:x:0:\nbin:x:1:\ndaemon:x:2:\nsys:x:3:\nadm:x:4:\ntty:x:5:\ndisk:x:6:\nlp:x:7:\nmem:x:8:\nkmem:x:9:\nwheel:x:10:\ncdrom:x:11:\nmail:x:12:postfix\n")])])]),a("p",[a("code",[s._v("/etc/group")]),s._v("字段含义：")]),s._v(" "),a("ul",[a("li",[s._v("第1字段：组名")]),s._v(" "),a("li",[s._v("第2字段：组密码标志")]),s._v(" "),a("li",[s._v("第3字段：GID")]),s._v(" "),a("li",[s._v("第4字段：组中附加用户")])])]),s._v(" "),a("li",[a("p",[s._v("组密码文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" /etc/gshadow\nroot:::\nbin:::bin,daemon\ndaemon:::bin,adm\nadm:::adm,daemon\ntty:::\ndisk:::\nlp:::daemon\nmen:::\nkmen:::\n")])])]),a("p",[a("code",[s._v("/etc/gshadow")]),s._v("字段含义:")]),s._v(" "),a("ul",[a("li",[s._v("第1字段：组名")]),s._v(" "),a("li",[s._v("第2字段：组密码")]),s._v(" "),a("li",[s._v("第3字段：组管理员用户名")]),s._v(" "),a("li",[s._v("第4字段：组中附加用户")])]),s._v(" "),a("p",[s._v("发现所有的组都没有密码，组密码用的不多，并且不推荐使用。")]),s._v(" "),a("p",[s._v("因为设置组密码和组管理员之后，组的管理员可以通过组密码来代替root用户完成添加组用户或者删除组用户，它执行了root用户的部分权限。这样会降低系统的安全性，这些事情本来应该root来做。")])])]),s._v(" "),a("h2",{attrs:{id:"_7-2-用户管理相关文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-用户管理相关文件"}},[s._v("#")]),s._v(" 7.2 用户管理相关文件")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("用户的家目录")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("普通用户:/home/用户名/，所有者和所属组都是此用户，权限是700")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ ll /home\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\ndrwx------. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" demo       demo     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":55 demo\ndrwx------.  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("222")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":25 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("超级用户:/root/，所有者和所属组都是root用户，权限是550")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ ll "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" /root\ndr-xr-x---. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":49 /root\n")])])]),a("p",[s._v("给的是550，但是权限对root其实没有限制。添加一个用户会自动生成/home/用户名的文件夹。")]),s._v(" "),a("p",[s._v("如果把普通用户变成超级用户，修改passwd文件的用户id为0")])])])]),s._v(" "),a("li",[a("p",[s._v("用户的邮箱")]),s._v(" "),a("p",[s._v("邮箱路径："),a("code",[s._v("/var/spool/mail/用户名")])]),s._v(" "),a("p",[s._v("添加用户时，会自动创建用户邮箱")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ ll /var/spool/mail/\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9940")]),s._v("\n-rw-rw----. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" demo       mail        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" demo\n-rw-rw----. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("        mail        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n-rw-rw----  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" huarong    mail        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 09:59 huarong\n-rw-rw----. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" jie        mail        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" jie\n-rw-rw----  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" lisong     mail        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" 08:59 lisong\n-rw-rw----. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" liuyinghao mail        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" liuyinghao\n")])])])]),s._v(" "),a("li",[a("p",[s._v("用户模板目录")]),s._v(" "),a("p",[s._v("用户模板目录："),a("code",[s._v("/etc/skel/")])]),s._v(" "),a("p",[s._v("创建出来的用户会有默认的几个文件，如下，这些文件是在创建用户时自动生成的，是自动从/etc/skel/下拷贝过来的")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" /home/liuyinghao/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("  .bash_history  .bash_logout  .bash_profile  .bashrc\n")])])]),a("p",[s._v("如果想要在创建用户时默认添加一个说明文件，可以把说明文件写好放在这个目录下，创建用户时会自动将这些文件生成在用户的家目录下。")])])]),s._v(" "),a("h2",{attrs:{id:"_7-3-用户管理命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-用户管理命令"}},[s._v("#")]),s._v(" 7.3 用户管理命令")]),s._v(" "),a("h3",{attrs:{id:"_7-3-1-用户添加命令-useradd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-1-用户添加命令-useradd"}},[s._v("#")]),s._v(" 7.3.1 用户添加命令 useradd")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("命令格式："),a("code",[s._v("useradd [选项] 用户名")])]),s._v(" "),a("p",[s._v("选项说明：")]),s._v(" "),a("p",[s._v("​\t-u UID:  手工指定用户的UID号")]),s._v(" "),a("p",[s._v("​\t-d 家目录：手工指定用户的家目录")]),s._v(" "),a("p",[s._v("​\t-c 用户说明：手工指定用户的说明")]),s._v(" "),a("p",[s._v("​\t-g 组名：手工指定用户的初始组")]),s._v(" "),a("p",[s._v("​\t-G 组名：指定用户的附加组")]),s._v(" "),a("p",[s._v("​\t    -s shell：手工指定用户的登录shell。默认是"),a("code",[s._v("/bin/bash")])])]),s._v(" "),a("li",[a("p",[s._v("添加默认用户")]),s._v(" "),a("p",[s._v("使用useradd默认会写入到如下文件中信息或创建相应目录")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" lamp\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# grep "lamp" /etc/passwd ')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# grep "lamp" /etc/shadow ')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# grep "lamp" /etc/group')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# grep "lamp" /etc/gshadow ')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d /home/lamp/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /var/spool/mail/lamp")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("指定选项添加用户")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" wangge\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("550")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" wangge "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-G")]),s._v(" root "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" /home/wangge "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test user"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /bin/bash wangge\n")])])]),a("p",[s._v("上面的操作是：创建用户组"),a("code",[s._v("wangge")]),s._v("；创建用户"),a("code",[s._v("wangge")]),s._v("，并指定用户的的"),a("code",[s._v("uid")]),s._v("为550，用户初始组为"),a("code",[s._v("wangge")]),s._v("，附加组为"),a("code",[s._v("root")]),s._v("（多个附加组用户逗号隔开），用户家目录为"),a("code",[s._v("/home/wangge")]),s._v(',用户说明为"test user"，用户的'),a("code",[s._v("shell")]),s._v("为"),a("code",[s._v("/bin/bash")])])]),s._v(" "),a("li",[a("p",[s._v("用户默认值文件")]),s._v(" "),a("p",[s._v("用户默认值文件路径："),a("code",[s._v("/etc/default/useradd")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("/etc/default/useradd  \n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GROUP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用户默认组  ")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用户家目录")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("INACTIVE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#密码过期宽限天数(7)")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("EXPIRE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#密码失效时间(8)")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("SHELL")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/bash        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认shell")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SKEL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/skel         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#模板目录")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CREATE_MAIL_SPOOL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#是否建立邮箱")]),s._v("\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("/etc/login.defs\n PASS_MAX_DAYS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("99999")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#密码有效期(5)")]),s._v("\n PASS_MIN_DAYS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#密码修改间隔(4)")]),s._v("\n PASS_MIN_LEN "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#密码最小5位(PAM)")]),s._v("\n PASS_WARN_AGE "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#密码到期警告(6)")]),s._v("\n UID_MIN "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最小和最大UID范围")]),s._v("\n GID_MAX "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60000")]),s._v("  \n ENCRYPT_METHOD SHA512   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#加密模式")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"_7-3-2-修改用户密码passwd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-2-修改用户密码passwd"}},[s._v("#")]),s._v(" 7.3.2 修改用户密码passwd")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("passwd命令格式")]),s._v(" "),a("p",[s._v("命令格式："),a("code",[s._v("passwd [选项] 用户名")])]),s._v(" "),a("p",[s._v("选项：")]),s._v(" "),a("p",[s._v("​\t-S       查询用户密码的密码状态。仅root用户可用。看到的信息是\t         shadow中的信息")]),s._v(" "),a("p",[s._v("​        -l\t  暂时锁定用户。仅root用户可用")]),s._v(" "),a("p",[s._v("​        -u      解锁用户。仅root用户可用")]),s._v(" "),a("p",[s._v("​\t-stdin   \t可以通过管道符输出的数据作为用户的密码。")])]),s._v(" "),a("li",[a("p",[s._v("查看密码状态")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" lamp\nlamp PS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("99999")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用户名密码设定时间(2013-01-06) 密码修改间隔时间(0) #密码有效期(99999) 警告时间(7)密码不失效(-1)")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("锁定用户和解锁用户")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# passwd -l lamp ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# passwd -u lamp")]),s._v("\n")])])]),a("p",[s._v("锁定用户其实是给密码前加了双感叹号，用户将无法登陆。")]),s._v(" "),a("p",[s._v("手动更改添加或删除双感叹号作用是一样的，用户将被锁定。原理是密码字符串加上其他的字符，换算出来的密码肯定发生了变化，用户就无法正常登陆。")])]),s._v(" "),a("li",[a("p",[s._v("使用字符串作为用户的密码")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "123" | passwd --stdin lamp')]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"_7-3-3-修改用户信息和修改用户密码状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-3-修改用户信息和修改用户密码状态"}},[s._v("#")]),s._v(" 7.3.3 修改用户信息和修改用户密码状态")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("修改用户信息："),a("code",[s._v("usermod [选项] 用户名")])]),s._v(" "),a("p",[s._v("选项说明：")]),s._v(" "),a("p",[s._v("​\t-u UID：\t\t\t\t修改用户的UID号")]),s._v(" "),a("p",[s._v("​\t-c 用户说明:\t\t\t修改用户的说明信息")]),s._v(" "),a("p",[s._v("​\t-G 组名:\t\t\t\t修改用户的附加组")]),s._v(" "),a("p",[s._v("​\t-L:\t\t\t\t\t临时锁定用户(Lock)")]),s._v(" "),a("p",[s._v("​\t-U:\t\t\t\t\t解锁用户锁定(Unlock)")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改用户的说明")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# usermod -c "test user" lamp')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#把lamp用户加入root组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# usermod -G root lamp ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#锁定用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# usermod -L lamp ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#解锁用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# usermod -U lamp ")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("修改用户密码状态："),a("code",[s._v("chage [选项] 用户名")])]),s._v(" "),a("p",[s._v("选项：")]),s._v(" "),a("p",[s._v("​\t-l: 列出用户的详细密码状态")]),s._v(" "),a("p",[s._v("​\t-d 日期: 修改密码最后一次更改日期(shadow3字段)")]),s._v(" "),a("p",[s._v("​\t-m 天数: 两次密码修改间隔(4字段)")]),s._v(" "),a("p",[s._v("​\t-M 天数: 密码有效期(5字段)")]),s._v(" "),a("p",[s._v("​\t-W 天数: 密码过期前警告天数(6字段)")]),s._v(" "),a("p",[s._v("​\t-I 天数: 密码过后宽限天数(7字段)")]),s._v(" "),a("p",[s._v("​\t-E日期: 账号失效时间(8字段)")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个命令其实是把密码修改日期归0了(shadow第3字段),这样用户一登陆就要修改密码")]),s._v("\nchange "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])])]),a("p",[s._v("这些就是shadow中的信息，其实手工修改shadow文件远要比使用这个命令去修改方便")])])]),s._v(" "),a("h3",{attrs:{id:"_7-3-4-删除用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-4-删除用户"}},[s._v("#")]),s._v(" 7.3.4 删除用户")]),s._v(" "),a("p",[s._v("删除用户："),a("code",[s._v("userdel [-r] 用户名")])]),s._v(" "),a("p",[s._v("选项：")]),s._v(" "),a("p",[s._v("​\t-r\t删除用户的同时删除用户家目录")]),s._v(" "),a("p",[s._v("手工删除用户：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/shadow\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/group\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/gshadow\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /var/spool/mail/lamp "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /home/lamp/\n")])])]),a("p",[s._v("查看用户ID")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" 用户名\n")])])]),a("h3",{attrs:{id:"_7-3-5-切换用户身份su"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-5-切换用户身份su"}},[s._v("#")]),s._v(" 7.3.5 切换用户身份su")]),s._v(" "),a("p",[s._v("语法："),a("code",[s._v("su [选项] 用户名")])]),s._v(" "),a("p",[s._v("选项：")]),s._v(" "),a("p",[s._v("​\t- ： 选项只使用“-”代表连带用户的环境变量一起切换")]),s._v(" "),a("p",[s._v("​        -c 命令：仅执行一次命令，而不切换用户身份")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#切换成root")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" – root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#不切换成root，但是执行useradd命令添加user1用户")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - root "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useradd user3"')]),s._v("\n")])])]),a("p",[s._v("使用su和sudo是有区别的，使用su切换用户需要输入所切换到的用户的密码，而使用sudo则是当前用户的密码。")])])}),[],!1,null,null,null);a.default=r.exports}}]);